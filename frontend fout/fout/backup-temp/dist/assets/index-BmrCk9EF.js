import{j as e,u as Bs,i as Ne,a as ns,b as is,A as Os,T as zs,I as we,c as L,B as I,C as ce,d as de,e as Fs,f as dt,M as Et,g as Y,L as At,h as Rt,k as It,l as Dt,m as Mt,D as os,n as Lt,o as Us,s as jt,p as Vs,q as Hs,r as ut,t as ue,v as Gs,G as ae,w as ve,x as ye,y as qs,z as Wt,E as Js,P as Xs,F as Ks,H as Zs,J as Ge,K as X,N as Qs,S as je,O as Ys,Q as er,R as tr,U as Bt,V as at,W as nt,X as it,Y as sr}from"./mui-cEMI3CSp.js";import{c as rr,r as l,R as ar,g as nr,a as vt}from"./vendor-BPyidg2q.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var ht={},Ot=rr;ht.createRoot=Ot.createRoot,ht.hydrateRoot=Ot.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ae(){return Ae=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Ae.apply(this,arguments)}var ge;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(ge||(ge={}));const zt="popstate";function ir(s){s===void 0&&(s={});function t(a,n){let{pathname:i,search:o,hash:h}=a.location;return pt("",{pathname:i,search:o,hash:h},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:cs(n)}return lr(t,r,null,s)}function q(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ls(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function or(){return Math.random().toString(36).substr(2,8)}function Ft(s,t){return{usr:s.state,key:s.key,idx:t}}function pt(s,t,r,a){return r===void 0&&(r=null),Ae({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?ke(t):t,{state:r,key:t&&t.key||a||or()})}function cs(s){let{pathname:t="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function ke(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substr(a),s=s.substr(0,a)),s&&(t.pathname=s)}return t}function lr(s,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,h=ge.Pop,d=null,c=p();c==null&&(c=0,o.replaceState(Ae({},o.state,{idx:c}),""));function p(){return(o.state||{idx:null}).idx}function u(){h=ge.Pop;let m=p(),g=m==null?null:m-c;c=m,d&&d({action:h,location:k.location,delta:g})}function f(m,g){h=ge.Push;let C=pt(k.location,m,g);c=p()+1;let A=Ft(C,c),N=k.createHref(C);try{o.pushState(A,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;n.location.assign(N)}i&&d&&d({action:h,location:k.location,delta:1})}function j(m,g){h=ge.Replace;let C=pt(k.location,m,g);c=p();let A=Ft(C,c),N=k.createHref(C);o.replaceState(A,"",N),i&&d&&d({action:h,location:k.location,delta:0})}function _(m){let g=n.location.origin!=="null"?n.location.origin:n.location.href,C=typeof m=="string"?m:cs(m);return C=C.replace(/ $/,"%20"),q(g,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,g)}let k={get action(){return h},get location(){return s(n,o)},listen(m){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(zt,u),d=m,()=>{n.removeEventListener(zt,u),d=null}},createHref(m){return t(n,m)},createURL:_,encodeLocation(m){let g=_(m);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:j,go(m){return o.go(m)}};return k}var Ut;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Ut||(Ut={}));function cr(s,t,r){return r===void 0&&(r="/"),dr(s,t,r)}function dr(s,t,r,a){let n=typeof t=="string"?ke(t):t,i=hs(n.pathname||"/",r);if(i==null)return null;let o=ds(s);ur(o);let h=null;for(let d=0;h==null&&d<o.length;++d){let c=Nr(i);h=vr(o[d],c)}return h}function ds(s,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,o,h)=>{let d={relativePath:h===void 0?i.path||"":h,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(q(d.relativePath.startsWith(a),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(a.length));let c=be([a,d.relativePath]),p=r.concat(d);i.children&&i.children.length>0&&(q(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ds(i.children,t,p,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:br(c,i.index),routesMeta:p})};return s.forEach((i,o)=>{var h;if(i.path===""||!((h=i.path)!=null&&h.includes("?")))n(i,o);else for(let d of us(i.path))n(i,o,d)}),t}function us(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=us(a.join("/")),h=[];return h.push(...o.map(d=>d===""?i:[i,d].join("/"))),n&&h.push(...o),h.map(d=>s.startsWith("/")&&d===""?"/":d)}function ur(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:jr(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const hr=/^:[\w-]+$/,pr=3,mr=2,gr=1,xr=10,fr=-2,Vt=s=>s==="*";function br(s,t){let r=s.split("/"),a=r.length;return r.some(Vt)&&(a+=fr),t&&(a+=mr),r.filter(n=>!Vt(n)).reduce((n,i)=>n+(hr.test(i)?pr:i===""?gr:xr),a)}function jr(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function vr(s,t,r){let{routesMeta:a}=s,n={},i="/",o=[];for(let h=0;h<a.length;++h){let d=a[h],c=h===a.length-1,p=i==="/"?t:t.slice(i.length)||"/",u=yr({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},p),f=d.route;if(!u)return null;Object.assign(n,u.params),o.push({params:n,pathname:be([i,u.pathname]),pathnameBase:_r(be([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=be([i,u.pathnameBase]))}return o}function yr(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=wr(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),h=n.slice(1);return{params:a.reduce((c,p,u)=>{let{paramName:f,isOptional:j}=p;if(f==="*"){let k=h[u]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const _=h[u];return j&&!_?c[f]=void 0:c[f]=(_||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:s}}function wr(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),ls(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,h,d)=>(a.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function Nr(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ls(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function hs(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function kr(s,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:n=""}=typeof s=="string"?ke(s):s;return{pathname:r?r.startsWith("/")?r:Sr(r,t):t,search:Tr(a),hash:$r(n)}}function Sr(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function ot(s,t,r,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Cr(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ps(s,t){let r=Cr(s);return t?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function ms(s,t,r,a){a===void 0&&(a=!1);let n;typeof s=="string"?n=ke(s):(n=Ae({},s),q(!n.pathname||!n.pathname.includes("?"),ot("?","pathname","search",n)),q(!n.pathname||!n.pathname.includes("#"),ot("#","pathname","hash",n)),q(!n.search||!n.search.includes("#"),ot("#","search","hash",n)));let i=s===""||n.pathname==="",o=i?"/":n.pathname,h;if(o==null)h=r;else{let u=t.length-1;if(!a&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),u-=1;n.pathname=f.join("/")}h=u>=0?t[u]:"/"}let d=kr(n,h),c=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(c||p)&&(d.pathname+="/"),d}const be=s=>s.join("/").replace(/\/\/+/g,"/"),_r=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Tr=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,$r=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Pr(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const gs=["post","put","patch","delete"];new Set(gs);const Er=["get",...gs];new Set(Er);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Re(){return Re=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},Re.apply(this,arguments)}const yt=l.createContext(null),Ar=l.createContext(null),Ie=l.createContext(null),Ze=l.createContext(null),he=l.createContext({outlet:null,matches:[],isDataRoute:!1}),xs=l.createContext(null);function De(){return l.useContext(Ze)!=null}function Qe(){return De()||q(!1),l.useContext(Ze).location}function fs(s){l.useContext(Ie).static||l.useLayoutEffect(s)}function Se(){let{isDataRoute:s}=l.useContext(he);return s?Jr():Rr()}function Rr(){De()||q(!1);let s=l.useContext(yt),{basename:t,future:r,navigator:a}=l.useContext(Ie),{matches:n}=l.useContext(he),{pathname:i}=Qe(),o=JSON.stringify(ps(n,r.v7_relativeSplatPath)),h=l.useRef(!1);return fs(()=>{h.current=!0}),l.useCallback(function(c,p){if(p===void 0&&(p={}),!h.current)return;if(typeof c=="number"){a.go(c);return}let u=ms(c,JSON.parse(o),i,p.relative==="path");s==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:be([t,u.pathname])),(p.replace?a.replace:a.push)(u,p.state,p)},[t,a,o,i,s])}const Ir=l.createContext(null);function Dr(s){let t=l.useContext(he).outlet;return t&&l.createElement(Ir.Provider,{value:s},t)}function Mr(){let{matches:s}=l.useContext(he),t=s[s.length-1];return t?t.params:{}}function Lr(s,t){return Wr(s,t)}function Wr(s,t,r,a){De()||q(!1);let{navigator:n}=l.useContext(Ie),{matches:i}=l.useContext(he),o=i[i.length-1],h=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let c=Qe(),p;if(t){var u;let m=typeof t=="string"?ke(t):t;d==="/"||(u=m.pathname)!=null&&u.startsWith(d)||q(!1),p=m}else p=c;let f=p.pathname||"/",j=f;if(d!=="/"){let m=d.replace(/^\//,"").split("/");j="/"+f.replace(/^\//,"").split("/").slice(m.length).join("/")}let _=cr(s,{pathname:j}),k=Ur(_&&_.map(m=>Object.assign({},m,{params:Object.assign({},h,m.params),pathname:be([d,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?d:be([d,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r,a);return t&&k?l.createElement(Ze.Provider,{value:{location:Re({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ge.Pop}},k):k}function Br(){let s=qr(),t=Pr(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),r?l.createElement("pre",{style:n},r):null,null)}const Or=l.createElement(Br,null);class zr extends l.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?l.createElement(he.Provider,{value:this.props.routeContext},l.createElement(xs.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fr(s){let{routeContext:t,match:r,children:a}=s,n=l.useContext(yt);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),l.createElement(he.Provider,{value:t},a)}function Ur(s,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var i;if(!r)return null;if(r.errors)s=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let o=s,h=(n=r)==null?void 0:n.errors;if(h!=null){let p=o.findIndex(u=>u.route.id&&h?.[u.route.id]!==void 0);p>=0||q(!1),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,c=-1;if(r&&a&&a.v7_partialHydration)for(let p=0;p<o.length;p++){let u=o[p];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=p),u.route.id){let{loaderData:f,errors:j}=r,_=u.route.loader&&f[u.route.id]===void 0&&(!j||j[u.route.id]===void 0);if(u.route.lazy||_){d=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((p,u,f)=>{let j,_=!1,k=null,m=null;r&&(j=h&&u.route.id?h[u.route.id]:void 0,k=u.route.errorElement||Or,d&&(c<0&&f===0?(Xr("route-fallback"),_=!0,m=null):c===f&&(_=!0,m=u.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,f+1)),C=()=>{let A;return j?A=k:_?A=m:u.route.Component?A=l.createElement(u.route.Component,null):u.route.element?A=u.route.element:A=p,l.createElement(Fr,{match:u,routeContext:{outlet:p,matches:g,isDataRoute:r!=null},children:A})};return r&&(u.route.ErrorBoundary||u.route.errorElement||f===0)?l.createElement(zr,{location:r.location,revalidation:r.revalidation,component:k,error:j,children:C(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):C()},null)}var bs=function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s}(bs||{}),js=function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s}(js||{});function Vr(s){let t=l.useContext(yt);return t||q(!1),t}function Hr(s){let t=l.useContext(Ar);return t||q(!1),t}function Gr(s){let t=l.useContext(he);return t||q(!1),t}function vs(s){let t=Gr(),r=t.matches[t.matches.length-1];return r.route.id||q(!1),r.route.id}function qr(){var s;let t=l.useContext(xs),r=Hr(),a=vs();return t!==void 0?t:(s=r.errors)==null?void 0:s[a]}function Jr(){let{router:s}=Vr(bs.UseNavigateStable),t=vs(js.UseNavigateStable),r=l.useRef(!1);return fs(()=>{r.current=!0}),l.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,Re({fromRouteId:t},i)))},[s,t])}const Ht={};function Xr(s,t,r){Ht[s]||(Ht[s]=!0)}function Kr(s,t){s?.v7_startTransition,s?.v7_relativeSplatPath}function ys(s){let{to:t,replace:r,state:a,relative:n}=s;De()||q(!1);let{future:i,static:o}=l.useContext(Ie),{matches:h}=l.useContext(he),{pathname:d}=Qe(),c=Se(),p=ms(t,ps(h,i.v7_relativeSplatPath),d,n==="path"),u=JSON.stringify(p);return l.useEffect(()=>c(JSON.parse(u),{replace:r,state:a,relative:n}),[c,u,n,r,a]),null}function Zr(s){return Dr(s.context)}function K(s){q(!1)}function Qr(s){let{basename:t="/",children:r=null,location:a,navigationType:n=ge.Pop,navigator:i,static:o=!1,future:h}=s;De()&&q(!1);let d=t.replace(/^\/*/,"/"),c=l.useMemo(()=>({basename:d,navigator:i,static:o,future:Re({v7_relativeSplatPath:!1},h)}),[d,h,i,o]);typeof a=="string"&&(a=ke(a));let{pathname:p="/",search:u="",hash:f="",state:j=null,key:_="default"}=a,k=l.useMemo(()=>{let m=hs(p,d);return m==null?null:{location:{pathname:m,search:u,hash:f,state:j,key:_},navigationType:n}},[d,p,u,f,j,_,n]);return k==null?null:l.createElement(Ie.Provider,{value:c},l.createElement(Ze.Provider,{children:r,value:k}))}function Yr(s){let{children:t,location:r}=s;return Lr(mt(t),r)}new Promise(()=>{});function mt(s,t){t===void 0&&(t=[]);let r=[];return l.Children.forEach(s,(a,n)=>{if(!l.isValidElement(a))return;let i=[...t,n];if(a.type===l.Fragment){r.push.apply(r,mt(a.props.children,i));return}a.type!==K&&q(!1),!a.props.index||!a.props.children||q(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=mt(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ea="6";try{window.__reactRouterVersion=ea}catch{}const ta="startTransition",Gt=ar[ta];function sa(s){let{basename:t,children:r,future:a,window:n}=s,i=l.useRef();i.current==null&&(i.current=ir({window:n,v5Compat:!0}));let o=i.current,[h,d]=l.useState({action:o.action,location:o.location}),{v7_startTransition:c}=a||{},p=l.useCallback(u=>{c&&Gt?Gt(()=>d(u)):d(u)},[d,c]);return l.useLayoutEffect(()=>o.listen(p),[o,p]),l.useEffect(()=>Kr(a),[a]),l.createElement(Qr,{basename:t,children:r,location:h.location,navigationType:h.action,navigator:o,future:a})}var qt;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(qt||(qt={}));var Jt;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Jt||(Jt={}));const ra=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold gradient-text text-center mb-8",children:"ðŸŽ¯ Tailwind CSS Test Page"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"modern-card p-6 hover-lift",children:[e.jsx("div",{className:"text-3xl mb-4",children:"ðŸ“Š"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Overzicht van alle gesprekken"}),e.jsx("button",{className:"btn-primary w-full",children:"Bekijk Dashboard"})]}),e.jsxs("div",{className:"modern-card p-6 hover-lift",children:[e.jsx("div",{className:"text-3xl mb-4",children:"ðŸŽ¤"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Live Transcriptie"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Real-time spraak naar tekst"}),e.jsx("button",{className:"btn-secondary w-full",children:"Start Transcriptie"})]}),e.jsxs("div",{className:"modern-card p-6 hover-lift",children:[e.jsx("div",{className:"text-3xl mb-4",children:"ðŸ‘¥"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Deelnemers"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Beheer gesprekdeelnemers"}),e.jsx("button",{className:"btn-neutral w-full",children:"Toon Deelnemers"})]})]}),e.jsxs("div",{className:"modern-card p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Status Badges"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"status-badge status-active",children:"ðŸŸ¢ Actief"}),e.jsx("span",{className:"status-badge status-scheduled",children:"ðŸ”µ Gepland"}),e.jsx("span",{className:"status-badge status-completed",children:"âš« Voltooid"}),e.jsx("span",{className:"status-badge status-cancelled",children:"ðŸ”´ Geannuleerd"})]})]}),e.jsxs("div",{className:"modern-card p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Button Styles"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("button",{className:"btn-primary",children:"ðŸš€ Primary"}),e.jsx("button",{className:"btn-secondary",children:"âœ… Secondary"}),e.jsx("button",{className:"btn-neutral",children:"âš™ï¸ Neutral"}),e.jsx("button",{className:"btn-danger",children:"ðŸ—‘ï¸ Danger"})]})]}),e.jsxs("div",{className:"modern-card p-6 mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Form Elements"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"je.naam@voorbeeld.nl",className:"modern-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Message"}),e.jsx("textarea",{rows:"4",placeholder:"Typ je bericht hier...",className:"modern-input resize-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn-primary",children:"ðŸ“¤ Versturen"}),e.jsx("button",{className:"btn-neutral",children:"âŒ Annuleren"})]})]})]}),e.jsxs("div",{className:"glass-container p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"ðŸ›¡ï¸ Privacy Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-slate-600",children:"GDPR Compliance"}),e.jsx("span",{className:"font-semibold text-green-600",children:"âœ… 100%"})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full w-full"})}),e.jsx("p",{className:"text-sm text-slate-600",children:"Alle privacy instellingen zijn correct geconfigureerd."})]})]})]})}),lt="http://localhost:8000";class aa{constructor(){this.token=localStorage.getItem("token"),this.user=JSON.parse(localStorage.getItem("user")||"null")}async login(t,r){try{console.log("Attempting login to:",`${lt}/api/auth/login`);const a=await fetch(`${lt}/api/auth/login`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:t,password:r})});if(console.log("Login response status:",a.status),!a.ok){const i=await a.text();throw console.log("Error response:",i),new Error(`HTTP error! status: ${a.status}`)}const n=await a.json();return console.log("Login response data:",n),n.success?(this.token=n.data.token,this.user=n.data.user,localStorage.setItem("token",this.token),localStorage.setItem("user",JSON.stringify(this.user)),{success:!0,user:this.user}):{success:!1,message:n.message}}catch(a){return console.error("Login error details:",a),{success:!1,message:`Verbindingsfout: ${a.message}`}}}async logout(){try{this.token&&await fetch(`${lt}/api/auth/logout`,{method:"POST",mode:"cors",headers:{Authorization:`Bearer ${this.token}`,"Content-Type":"application/json"}})}catch(t){console.error("Logout error:",t)}finally{this.token=null,this.user=null,localStorage.removeItem("token"),localStorage.removeItem("user")}}isAuthenticated(){return!!this.token&&!!this.user}getUser(){return this.user}getToken(){return this.token}}const F=new aa,ws=l.createContext(),Ns=()=>{const s=l.useContext(ws);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},na=({children:s})=>{const[t,r]=l.useState(null),[a,n]=l.useState(!0);l.useEffect(()=>{F.isAuthenticated()&&r(F.getUser()),n(!1)},[]);const h={user:t,login:async(d,c)=>{const p=await F.login(d,c);return p.success&&r(p.user),p},logout:async()=>{await F.logout(),r(null)},isAuthenticated:!!t,loading:a};return e.jsx(ws.Provider,{value:h,children:s})};var wt={},ct={};const ia=nr(Bs);var Xt;function Ce(){return Xt||(Xt=1,function(s){"use client";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=ia}(ct)),ct}var oa=Ne;Object.defineProperty(wt,"__esModule",{value:!0});var gt=wt.default=void 0,la=oa(Ce()),ca=e;gt=wt.default=(0,la.default)((0,ca.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var Nt={},da=Ne;Object.defineProperty(Nt,"__esModule",{value:!0});var ks=Nt.default=void 0,ua=da(Ce()),ha=e;ks=Nt.default=(0,ua.default)((0,ha.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications");var kt={},pa=Ne;Object.defineProperty(kt,"__esModule",{value:!0});var St=kt.default=void 0,ma=pa(Ce()),ga=e;St=kt.default=(0,ma.default)((0,ga.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3z"}),"VideoCall");var Ct={},xa=Ne;Object.defineProperty(Ct,"__esModule",{value:!0});var Ss=Ct.default=void 0,fa=xa(Ce()),ba=e;Ss=Ct.default=(0,fa.default)((0,ba.jsx)("circle",{cx:"12",cy:"12",r:"8"}),"FiberManualRecord");const ja=({toggleMobileSidebar:s,toggleSidebar:t,isSidebarOpen:r,sidebarWidth:a=270})=>{const n=ns(),i=is(n.breakpoints.up("lg")),[o,h]=l.useState(null),[d,c]=l.useState(null),[p,u]=l.useState(!1),[f,j]=l.useState(3),_=C=>{h(C.currentTarget)},k=C=>{c(C.currentTarget)},m=()=>{h(null),c(null)},g=()=>{console.log("Starting new meeting...")};return e.jsx(Os,{sx:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",backgroundColor:"white",color:"#1f2937",borderBottom:"1px solid #e5e7eb",zIndex:1100,position:"fixed",width:i&&r?`calc(100% - ${a}px)`:"100%",marginLeft:i&&r?`${a}px`:0,transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen})},color:"default",children:e.jsxs(zs,{sx:{minHeight:"70px !important"},children:[!i&&e.jsx(we,{color:"inherit","aria-label":"menu",onClick:s,sx:{mr:2},children:e.jsx(gt,{})}),i&&e.jsx(we,{color:"inherit","aria-label":"toggle sidebar",onClick:t,sx:{mr:2},children:e.jsx(gt,{})}),!i&&e.jsx(L,{variant:"h6",sx:{fontWeight:"bold",color:"#3b82f6",mr:2},children:"Mayo"}),e.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:2,mr:2},children:[e.jsx(ce,{icon:e.jsx(Ss,{}),label:p?"Opname actief":"Niet actief",size:"small",color:p?"error":"default",variant:p?"filled":"outlined"}),e.jsx(ce,{label:"ðŸ”’ PrivÃ© modus",size:"small",sx:{backgroundColor:"#10b981",color:"white","&:hover":{backgroundColor:"#059669"}}})]}),e.jsx(I,{sx:{flexGrow:1}}),e.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(de,{variant:"contained",startIcon:e.jsx(St,{}),onClick:g,sx:{backgroundColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"},borderRadius:2,textTransform:"none",display:{xs:"none",md:"flex"}},children:"Nieuw Gesprek"}),e.jsx(we,{color:"inherit",onClick:_,sx:{ml:1},children:e.jsx(Fs,{badgeContent:f,color:"error",children:e.jsx(ks,{})})}),e.jsx(we,{color:"inherit",onClick:k,sx:{ml:1},children:e.jsx(dt,{sx:{width:35,height:35,backgroundColor:"#3b82f6",fontSize:"0.875rem"},children:"JB"})})]}),e.jsxs(Et,{anchorEl:o,open:!!o,onClose:m,PaperProps:{sx:{width:300,mt:1,zIndex:1300}},children:[e.jsx(I,{sx:{p:2,borderBottom:"1px solid #e5e7eb"},children:e.jsxs(L,{variant:"h6",sx:{fontSize:"1rem",fontWeight:600},children:["Meldingen (",f,")"]})}),e.jsx(Y,{onClick:m,children:e.jsxs(I,{children:[e.jsx(L,{variant:"body2",sx:{fontWeight:500},children:"Nieuwe transcriptie gereed"}),e.jsx(L,{variant:"caption",color:"text.secondary",children:'Gesprek "Budget Meeting" - 2 min geleden'})]})}),e.jsx(Y,{onClick:m,children:e.jsxs(I,{children:[e.jsx(L,{variant:"body2",sx:{fontWeight:500},children:"Privacy controle voltooid"}),e.jsx(L,{variant:"caption",color:"text.secondary",children:"Geen gevoelige informatie gedetecteerd - 5 min geleden"})]})}),e.jsx(Y,{onClick:m,children:e.jsxs(I,{children:[e.jsx(L,{variant:"body2",sx:{fontWeight:500},children:"Export gereed voor N8N"}),e.jsx(L,{variant:"caption",color:"text.secondary",children:"Agenda items zijn doorgestuurd - 10 min geleden"})]})})]}),e.jsxs(Et,{anchorEl:d,open:!!d,onClose:m,PaperProps:{sx:{width:250,mt:1,zIndex:1300}},children:[e.jsxs(I,{sx:{p:2,borderBottom:"1px solid #e5e7eb"},children:[e.jsx(L,{variant:"body1",sx:{fontWeight:600},children:"Jan van der Berg"}),e.jsx(L,{variant:"caption",color:"text.secondary",children:"GesprekscoÃ¶rdinator"})]}),e.jsx(Y,{onClick:m,children:"Profiel"}),e.jsx(Y,{onClick:m,children:"Instellingen"}),e.jsx(Y,{onClick:m,children:"Privacy Instellingen"}),e.jsx(Y,{onClick:m,sx:{color:"#dc2626"},children:"Uitloggen"})]})]})})};var _t={},va=Ne;Object.defineProperty(_t,"__esModule",{value:!0});var xt=_t.default=void 0,ya=va(Ce()),wa=e;xt=_t.default=(0,ya.default)((0,wa.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History");var Tt={},Na=Ne;Object.defineProperty(Tt,"__esModule",{value:!0});var Cs=Tt.default=void 0,ka=Na(Ce()),Sa=e;Cs=Tt.default=(0,ka.default)((0,Sa.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const Ca=[{title:"Alle Gesprekken",icon:xt,href:"/dashboard"},{title:"Nieuw Gesprek",icon:St,href:"/meetings/create"},{title:"Gesprek",icon:xt,href:"/meetings"}],_a=[{title:"Instellingen",icon:Cs,href:"/settings"}],Ta=({isSidebarOpen:s,isMobileSidebarOpen:t,onSidebarClose:r,sidebarWidth:a=270})=>{const n=ns(),i=Se(),o=Qe(),h=is(n.breakpoints.up("lg")),d=u=>u==="/dashboard"?o.pathname==="/dashboard":o.pathname.startsWith(u),c=u=>{i(u),h||r()},p=e.jsxs(I,{sx:{height:"100%",backgroundColor:"#1e293b",display:"flex",flexDirection:"column"},children:[e.jsxs(I,{sx:{px:3,py:3,borderBottom:"1px solid #334155"},children:[e.jsxs(L,{variant:"h5",sx:{color:"white",fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[e.jsx(I,{sx:{width:32,height:32,backgroundColor:"#3b82f6",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold"}}),"Mayo"]}),e.jsx(L,{variant:"caption",sx:{color:"#94a3b8",mt:.5,display:"block"},children:"Gemeente Meierijstad"})]}),e.jsxs(I,{sx:{px:2,py:2,flexGrow:1},children:[e.jsx(L,{variant:"overline",sx:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:600,px:2,mb:1,display:"block"},children:"HOOFDMENU"}),e.jsx(At,{disablePadding:!0,children:Ca.map(u=>{const f=u.icon,j=d(u.href);return e.jsx(Rt,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(It,{onClick:()=>c(u.href),sx:{borderRadius:2,mx:1,backgroundColor:j?"#3b82f6":"transparent",color:j?"white":"#cbd5e1","&:hover":{backgroundColor:j?"#2563eb":"#334155"}},children:[e.jsx(Dt,{sx:{color:j?"white":"#94a3b8",minWidth:40},children:e.jsx(f,{fontSize:"small"})}),e.jsx(Mt,{primary:u.title,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:j?600:400}})]})},u.title)})}),e.jsx(os,{sx:{borderColor:"#334155",mx:2,my:2}}),e.jsx(L,{variant:"overline",sx:{color:"#94a3b8",fontSize:"0.75rem",fontWeight:600,px:2,mb:1,display:"block"},children:"INSTELLINGEN"}),e.jsx(At,{disablePadding:!0,children:_a.map(u=>{const f=u.icon,j=d(u.href);return e.jsx(Rt,{disablePadding:!0,sx:{mb:.5},children:e.jsxs(It,{onClick:()=>c(u.href),sx:{borderRadius:2,mx:1,backgroundColor:j?"#3b82f6":"transparent",color:j?"white":"#cbd5e1","&:hover":{backgroundColor:j?"#2563eb":"#334155"}},children:[e.jsx(Dt,{sx:{color:j?"white":"#94a3b8",minWidth:40},children:e.jsx(f,{fontSize:"small"})}),e.jsx(Mt,{primary:u.title,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:j?600:400}})]})},u.title)})})]}),e.jsx(I,{sx:{p:2},children:e.jsx(I,{sx:{backgroundColor:"#10b981",color:"white",px:2,py:1,borderRadius:2,textAlign:"center"},children:e.jsx(L,{variant:"caption",sx:{fontWeight:600},children:"ðŸ”’ GDPR/AVG Compliant"})})})]});return h?e.jsx(Lt,{anchor:"left",open:s,variant:"persistent",PaperProps:{sx:{width:a,border:"0 !important",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",position:"fixed",height:"100vh",zIndex:1200}},children:p}):e.jsx(Lt,{anchor:"left",open:t,onClose:r,variant:"temporary",PaperProps:{sx:{width:a,border:"0 !important",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}},children:p})},$a=Us({palette:{primary:{main:"#3b82f6",light:"#60a5fa",dark:"#1d4ed8"},secondary:{main:"#10b981",light:"#34d399",dark:"#059669"},background:{default:"#f8fafc",paper:"#ffffff"},text:{primary:"#1e293b",secondary:"#64748b"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:700},h2:{fontWeight:600},h3:{fontWeight:600}},shape:{borderRadius:8},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500}}},MuiPaper:{styleOverrides:{root:{boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"}}}}}),Pa=jt("div")(()=>({display:"flex",minHeight:"100vh",width:"100%"})),Ea=jt("div")(({theme:s,sidebarOpen:t,sidebarWidth:r})=>({display:"flex",flexDirection:"column",flexGrow:1,minHeight:"100vh",marginLeft:t?`${r}px`:0,transition:s.transitions.create("margin",{easing:s.transitions.easing.sharp,duration:s.transitions.duration.leavingScreen}),[s.breakpoints.down("lg")]:{marginLeft:0}})),Aa=jt(I)(({theme:s})=>({marginTop:"70px",flexGrow:1,minHeight:"calc(100vh - 70px)"})),Ra=()=>{const[s,t]=l.useState(!0),[r,a]=l.useState(!1),n=270,i=()=>{t(!s)},o=()=>{a(!r)};return e.jsxs(Vs,{theme:$a,children:[e.jsx(Hs,{}),e.jsxs(Pa,{children:[e.jsx(Ta,{isSidebarOpen:s,isMobileSidebarOpen:r,onSidebarClose:()=>a(!1),sidebarWidth:n}),e.jsxs(Ea,{sidebarOpen:s,sidebarWidth:n,children:[e.jsx(ja,{toggleMobileSidebar:o,toggleSidebar:i,isSidebarOpen:s,sidebarWidth:n}),e.jsx(Aa,{children:e.jsx(ut,{sx:{paddingTop:"20px",paddingBottom:"20px",maxWidth:"1200px",height:"100%"},maxWidth:!1,children:e.jsx(I,{sx:{minHeight:"calc(100vh - 140px)"},children:e.jsx(Zr,{})})})})]})]})]})},ft=ue(e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Kt=ue(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),Ia=ue(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Da=ue(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Zt=ue(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"Group"),Ma=ue(e.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),La=ue([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule"),Qt=ue(e.jsx("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3z"}),"VideoCall"),Wa=ue(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),$e="http://localhost:8000";class Ba{async getAllMeetings(){try{return await(await fetch(`${$e}/api/meetings`,{headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}})).json()}catch(t){return console.error("Get meetings error:",t),{success:!1,message:"Verbindingsfout"}}}async createMeeting(t){try{return await(await fetch(`${$e}/api/meetings`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"},body:JSON.stringify(t)})).json()}catch(r){return console.error("Create meeting error:",r),{success:!1,message:"Verbindingsfout"}}}async getMeeting(t){try{return await(await fetch(`${$e}/api/meetings/${t}`,{headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}})).json()}catch(r){return console.error("Get meeting error:",r),{success:!1,message:"Verbindingsfout"}}}async startMeeting(t){try{return await(await fetch(`${$e}/api/meetings/${t}/start`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}})).json()}catch(r){return console.error("Start meeting error:",r),{success:!1,message:"Verbindingsfout"}}}async stopMeeting(t){try{return await(await fetch(`${$e}/api/meetings/${t}/stop`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}})).json()}catch(r){return console.error("Stop meeting error:",r),{success:!1,message:"Verbindingsfout"}}}}const Ke=new Ba,Oa=()=>{const s=Se(),[t,r]=l.useState([]),[a,n]=l.useState(!0);l.useEffect(()=>{i()},[]);const i=async()=>{try{const u=await Ke.getAllMeetings();u.success&&r(u.data)}catch(u){console.error("Failed to load meetings:",u)}finally{n(!1)}},o=t.filter(u=>u.status==="scheduled"||u.status==="active"),h=t.filter(u=>u.status==="completed"||u.status==="cancelled"),d=u=>{const f={scheduled:{color:"info",label:"Gepland",bgcolor:"#e3f2fd",textColor:"#1565c0"},active:{color:"success",label:"Actief",bgcolor:"#e8f5e8",textColor:"#2e7d32"},completed:{color:"default",label:"Voltooid",bgcolor:"#f5f5f5",textColor:"#616161"},cancelled:{color:"error",label:"Geannuleerd",bgcolor:"#ffebee",textColor:"#c62828"}},j=f[u]||f.scheduled;return e.jsx(ce,{label:j.label,sx:{backgroundColor:j.bgcolor,color:j.textColor,fontWeight:500,fontSize:"0.75rem"},size:"small"})},c=u=>{const f={general:{label:"Algemeen",icon:"ðŸ’¼",color:"#64748b"},participation:{label:"Participatie",icon:"ðŸ¤",color:"#3b82f6"},care:{label:"Zorg",icon:"â¤ï¸",color:"#ef4444"},education:{label:"Onderwijs",icon:"ðŸŽ“",color:"#8b5cf6"}};return f[u]||f.general},p=(u,f,j,_,k=!1)=>e.jsxs(I,{sx:{mb:4},children:[e.jsxs(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(L,{variant:"h5",sx:{fontWeight:600,color:"#1e293b",display:"flex",alignItems:"center",gap:2},children:["ðŸ“‹ ",f,e.jsx(ce,{label:u.length,size:"small",sx:{bgcolor:"#f1f5f9",color:"#64748b",fontWeight:500}})]}),k&&e.jsx(de,{variant:"contained",startIcon:e.jsx(ft,{}),onClick:()=>s("/meetings/create"),sx:{backgroundColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"},borderRadius:2,px:3,py:1.5},children:"Nieuw Gesprek"})]}),u.length===0?e.jsx(ve,{sx:{textAlign:"center",py:8,bgcolor:"#f8fafc"},children:e.jsxs(ye,{children:[e.jsx(L,{variant:"h1",sx:{fontSize:"4rem",mb:2},children:_}),e.jsx(L,{variant:"h6",sx:{color:"#64748b",mb:2,fontWeight:500},children:j}),k&&e.jsxs(I,{children:[e.jsx(L,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Begin vandaag nog met je eerste intelligente gesprek!"}),e.jsx(de,{variant:"contained",startIcon:e.jsx(ft,{}),onClick:()=>s("/meetings/create"),size:"large",sx:{backgroundColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"},px:4,py:1.5},children:"Eerste Gesprek Aanmaken"})]})]})}):e.jsx(ae,{container:!0,spacing:3,children:u.map(m=>{const g=c(m.type);return e.jsx(ae,{item:!0,xs:12,lg:6,children:e.jsxs(ve,{sx:{height:"100%",border:m.status==="active"?"2px solid #10b981":"1px solid #e5e7eb","&:hover":{boxShadow:"0 4px 12px 0 rgba(0, 0, 0, 0.15)",transform:"translateY(-2px)",transition:"all 0.2s ease-in-out"},transition:"all 0.2s ease-in-out"},children:[e.jsxs(ye,{children:[e.jsxs(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(L,{variant:"h6",sx:{fontWeight:600,color:"#1e293b",flexGrow:1,mr:2},children:m.title}),d(m.status)]}),e.jsx(I,{sx:{display:"flex",alignItems:"center",mb:2},children:e.jsxs(L,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1,color:g.color,bgcolor:`${g.color}15`,px:2,py:.5,borderRadius:1,fontWeight:500},children:[e.jsx("span",{children:g.icon}),g.label]})}),e.jsxs(I,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:2},children:[e.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Zt,{sx:{fontSize:16,color:"#64748b"}}),e.jsxs(L,{variant:"body2",color:"text.secondary",children:[m.participants?.length||0," deelnemers"]})]}),e.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(Kt,{sx:{fontSize:16,color:"#64748b"}}),e.jsxs(L,{variant:"body2",color:"text.secondary",children:[m.agenda_items?.length||0," agenda punten"]})]}),m.scheduled_at&&e.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(La,{sx:{fontSize:16,color:"#64748b"}}),e.jsx(L,{variant:"body2",color:"text.secondary",children:new Date(m.scheduled_at).toLocaleDateString("nl-NL",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})})]})]}),m.participants&&m.participants.length>0&&e.jsxs(I,{sx:{display:"flex",gap:1,mb:2},children:[m.participants.slice(0,4).map((C,A)=>e.jsx(dt,{sx:{width:28,height:28,fontSize:"0.75rem",bgcolor:"#3b82f6"},children:C.name?.charAt(0)||"D"},C.id||A)),m.participants.length>4&&e.jsxs(dt,{sx:{width:28,height:28,fontSize:"0.75rem",bgcolor:"#64748b"},children:["+",m.participants.length-4]})]})]}),e.jsx(os,{}),e.jsxs(qs,{sx:{p:2,justifyContent:"space-between"},children:[e.jsx(de,{variant:"outlined",startIcon:e.jsx(Wa,{}),onClick:()=>s(`/meetings/${m.id}`),size:"small",sx:{borderRadius:2},children:"Bekijk"}),e.jsxs(I,{sx:{display:"flex",gap:1},children:[m.status==="scheduled"&&e.jsx(de,{variant:"contained",startIcon:e.jsx(Ma,{}),onClick:()=>s(`/meetings/${m.id}/room`),size:"small",sx:{backgroundColor:"#10b981","&:hover":{backgroundColor:"#059669"},borderRadius:2},children:"Start"}),m.status==="active"&&e.jsx(de,{variant:"contained",startIcon:e.jsx(Qt,{}),onClick:()=>s(`/meetings/${m.id}/room`),size:"small",sx:{backgroundColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"},borderRadius:2},children:"Deelnemen"})]})]})]})},m.id)})})]});return a?e.jsx(ut,{maxWidth:"lg",sx:{py:4},children:e.jsx(I,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:e.jsxs(I,{sx:{textAlign:"center"},children:[e.jsx(Gs,{size:48,sx:{color:"#3b82f6",mb:2}}),e.jsx(L,{variant:"body1",sx:{color:"#64748b",fontWeight:500},children:"Gesprekken laden..."})]})})}):e.jsxs(ut,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(I,{sx:{mb:4},children:[e.jsx(L,{variant:"h4",sx:{fontWeight:700,color:"#1e293b",mb:1},children:"Dashboard"}),e.jsx(L,{variant:"body1",color:"text.secondary",children:"Overzicht van al je gesprekken en hun voortgang"})]}),e.jsxs(ae,{container:!0,spacing:3,sx:{mb:4},children:[e.jsx(ae,{item:!0,xs:12,md:4,children:e.jsx(ve,{sx:{bgcolor:"#f0f9ff",border:"1px solid #e0f2fe"},children:e.jsx(ye,{children:e.jsxs(I,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Qt,{sx:{color:"#0284c7",mr:2,fontSize:32}}),e.jsxs(I,{children:[e.jsx(L,{variant:"h5",sx:{color:"#0284c7",fontWeight:600},children:o.length}),e.jsx(L,{variant:"body2",color:"text.secondary",children:"Actieve Gesprekken"})]})]})})})}),e.jsx(ae,{item:!0,xs:12,md:4,children:e.jsx(ve,{sx:{bgcolor:"#f0fdf4",border:"1px solid #dcfce7"},children:e.jsx(ye,{children:e.jsxs(I,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Zt,{sx:{color:"#16a34a",mr:2,fontSize:32}}),e.jsxs(I,{children:[e.jsx(L,{variant:"h5",sx:{color:"#16a34a",fontWeight:600},children:t.reduce((u,f)=>u+(f.participants?.length||0),0)}),e.jsx(L,{variant:"body2",color:"text.secondary",children:"Totaal Deelnemers"})]})]})})})}),e.jsx(ae,{item:!0,xs:12,md:4,children:e.jsx(ve,{sx:{bgcolor:"#fefce8",border:"1px solid #fef3c7"},children:e.jsx(ye,{children:e.jsxs(I,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Kt,{sx:{color:"#ca8a04",mr:2,fontSize:32}}),e.jsxs(I,{children:[e.jsx(L,{variant:"h5",sx:{color:"#ca8a04",fontWeight:600},children:h.length}),e.jsx(L,{variant:"body2",color:"text.secondary",children:"Voltooide Gesprekken"})]})]})})})})]}),p(o,"Actieve Gesprekken","Geen actieve gesprekken","ðŸŒŸ",!0),p(h,"Voltooide Gesprekken","Geen voltooide gesprekken","ðŸ“‹",!1)]})},za=()=>{const[s,t]=l.useState(""),[r,a]=l.useState(""),[n,i]=l.useState(!1),[o,h]=l.useState(""),{login:d}=Ns(),c=Se(),p=async u=>{u.preventDefault(),i(!0),h("");try{const f=await d(s,r);f.success?c("/dashboard"):h(f.message||"Login mislukt")}catch(f){console.error("Login error:",f),h("Er is een fout opgetreden")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Inloggen bij ConversationHub"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Intelligente gespreksondersteuning met privacy-first design"})]}),o&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded",children:o}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"conversation-input w-full rounded-t-md",placeholder:"Email adres",value:s,onChange:u=>t(u.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"conversation-input w-full rounded-b-md",placeholder:"Wachtwoord",value:r,onChange:u=>a(u.target.value)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n,className:"conversation-button w-full disabled:opacity-50",children:n?"Inloggen...":"Inloggen"})}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:[e.jsx("p",{children:"Test account:"}),e.jsx("p",{children:"Email: test@conversationhub.nl"}),e.jsx("p",{children:"Wachtwoord: password123"})]})]})]})})},Fa=()=>{const s=Se(),[t,r]=l.useState(!1),[a,n]=l.useState(""),[i,o]=l.useState({title:"",description:"",type:"general",scheduled_date:"",scheduled_time:"",privacy_level:"standard",auto_transcription:!0}),[h,d]=l.useState([{name:"",email:"",role:"participant"}]),[c,p]=l.useState(""),u=N=>{const{name:b,value:P,type:U,checked:v}=N.target;o(S=>({...S,[b]:U==="checkbox"?v:P}))},f=()=>{const b=new Date().toISOString().split("T")[0];o(P=>({...P,scheduled_date:b}))},j=()=>{const b=new Date().toTimeString().slice(0,5);o(P=>({...P,scheduled_time:b}))},_=()=>{d([...h,{name:"",email:"",role:"participant"}])},k=N=>{d(h.filter((b,P)=>P!==N))},m=(N,b,P)=>{const U=h.map((v,S)=>S===N?{...v,[b]:P}:v);d(U)},g=async N=>{N.preventDefault(),r(!0),n("");try{const b=h.filter(R=>R.name.trim()!==""),P=c.split(`
`).map(R=>R.trim()).filter(R=>R!=="").map((R,y)=>({title:R,description:"",estimated_duration:10,order:y+1}));let U=null;i.scheduled_date&&i.scheduled_time&&(U=`${i.scheduled_date}T${i.scheduled_time}:00`);const v={title:i.title,description:i.description,type:i.type,scheduled_at:U,duration_minutes:60,privacy_level:i.privacy_level,auto_transcription:i.auto_transcription,participants:b,agenda_items:P},S=await Ke.createMeeting(v);S.success?s("/dashboard"):n(S.message||"Er is een fout opgetreden")}catch{n("Er is een fout opgetreden")}finally{r(!1)}},C=[{value:"general",label:"Algemeen",icon:"ðŸ’¼",desc:"Standaard gesprek"},{value:"participation",label:"Participatie",icon:"ðŸ¤",desc:"Re-integratie en werkbegeleiding"},{value:"care",label:"Zorg",icon:"â¤ï¸",desc:"Zorgtraject en ondersteuning"},{value:"education",label:"Onderwijs",icon:"ðŸŽ“",desc:"Studieloopbaan en begeleiding"}],A=[{value:"minimal",label:"Minimaal",icon:"ðŸ”’",desc:"Alleen basistekst"},{value:"standard",label:"Standaard",icon:"ðŸ›¡ï¸",desc:"Gevoelige data gefilterd"},{value:"detailed",label:"Gedetailleerd",icon:"ðŸ“",desc:"Alles opgenomen"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Nieuw Gesprek Aanmaken"}),e.jsx("p",{className:"text-gray-600",children:"Stel een gesprek in met deelnemers en agenda"})]}),a&&e.jsx("div",{className:"modern-card p-4 bg-red-50 border-red-200 text-red-600",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"âŒ"}),e.jsx("span",{children:a})]})}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Gesprek Details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“Œ Titel van het Gesprek *"}),e.jsx("input",{type:"text",name:"title",value:i.title,onChange:u,className:"modern-input",placeholder:"Bijvoorbeeld: Intake gesprek John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“ Beschrijving"}),e.jsx("textarea",{name:"description",value:i.description,onChange:u,className:"modern-input",rows:"3",placeholder:"Korte beschrijving van het doel en context van het gesprek"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ“… Geplande Datum"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"date",name:"scheduled_date",value:i.scheduled_date,onChange:u,className:"modern-input flex-1"}),e.jsx("button",{type:"button",onClick:f,className:"btn-neutral px-3 py-2 text-sm",children:"Vandaag"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ðŸ• Geplande Tijd"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"time",name:"scheduled_time",value:i.scheduled_time,onChange:u,className:"modern-input flex-1"}),e.jsx("button",{type:"button",onClick:j,className:"btn-neutral px-3 py-2 text-sm",children:"Nu"})]})]})]})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸŽ¯"}),e.jsx("span",{children:"Type Gesprek"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(N=>e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"type",value:N.value,checked:i.type===N.value,onChange:u,className:"sr-only"}),e.jsx("div",{className:`modern-card p-4 border-2 transition-all duration-300 ${i.type===N.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:N.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:N.label}),e.jsx("p",{className:"text-sm text-gray-600",children:N.desc})]})]})})]},N.value))})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸ‘¥"}),e.jsx("span",{children:"Deelnemers"})]}),e.jsxs("button",{type:"button",onClick:_,className:"btn-secondary px-4 py-2",children:[e.jsx("span",{className:"mr-1",children:"âž•"}),"Toevoegen"]})]}),e.jsx("div",{className:"space-y-3",children:h.map((N,b)=>e.jsx("div",{className:"modern-card p-4 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Naam *"}),e.jsx("input",{type:"text",placeholder:"Volledige naam",value:N.name,onChange:P=>m(b,"name",P.target.value),className:"modern-input text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Email"}),e.jsx("input",{type:"email",placeholder:"email@voorbeeld.nl",value:N.email,onChange:P=>m(b,"email",P.target.value),className:"modern-input text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Rol"}),e.jsxs("select",{value:N.role,onChange:P=>m(b,"role",P.target.value),className:"modern-input text-sm",children:[e.jsx("option",{value:"participant",children:"Deelnemer"}),e.jsx("option",{value:"facilitator",children:"Begeleider"}),e.jsx("option",{value:"observer",children:"Observant"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"button",onClick:()=>k(b),className:"btn-danger px-3 py-2 text-sm w-full",disabled:h.length===1,children:"ðŸ—‘ï¸ Verwijder"})})]})},b))})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸ“‹"}),e.jsx("span",{children:"Agenda Punten"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Agenda Items (elk punt op een nieuwe regel)"}),e.jsx("textarea",{value:c,onChange:N=>p(N.target.value),className:"modern-input",rows:"6",placeholder:`Welkom en kennismaking
Huidige situatie bespreken
Doelen opstellen
Vervolgstappen
Afsluiting`}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2 flex items-center space-x-1",children:[e.jsx("span",{children:"ðŸ’¡"}),e.jsx("span",{children:"Typ elk agendapunt op een nieuwe regel. Druk op Enter voor het volgende punt."})]})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸ”"}),e.jsx("span",{children:"Privacy Instellingen"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Privacy Niveau"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map(N=>e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"radio",name:"privacy_level",value:N.value,checked:i.privacy_level===N.value,onChange:u,className:"sr-only"}),e.jsx("div",{className:`modern-card p-4 border-2 transition-all duration-300 ${i.privacy_level===N.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-2xl mb-2 block",children:N.icon}),e.jsx("h3",{className:"font-semibold text-gray-800",children:N.label}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:N.desc})]})})]},N.value))})]}),e.jsx("div",{className:"modern-card p-4 bg-blue-50 border-blue-200",children:e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"auto_transcription",checked:i.auto_transcription,onChange:u,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-blue-800",children:"ðŸŽ¤ Automatische transcriptie inschakelen"}),e.jsx("p",{className:"text-sm text-blue-600",children:"Real-time spraak naar tekst conversie"})]})]})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 py-6",children:[e.jsx("button",{type:"button",onClick:()=>s("/dashboard"),className:"btn-neutral px-6 py-3",children:"âŒ Annuleren"}),e.jsx("button",{type:"submit",disabled:t,className:"btn-primary px-8 py-3",children:t?e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Aanmaken..."})]}):e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"ðŸš€"}),e.jsx("span",{children:"Gesprek Aanmaken"})]})})]})]})]})},oe="http://localhost:8000";class Ua{async getTranscriptions(t){try{const r=await fetch(`${oe}/api/meetings/${t}/transcriptions`,{headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to get transcriptions");return a}catch(r){return console.error("Get transcriptions error:",r),{success:!1,message:r.message||"Verbindingsfout"}}}async deleteTranscriptionsByType(t,r=null){try{console.log("ðŸ—‘ï¸ DELETE API call starting:",{meetingId:t,type:r,url:r?`/api/meetings/${t}/transcriptions/${r}`:`/api/meetings/${t}/transcriptions`});const a=r?`${oe}/api/meetings/${t}/transcriptions/${r}`:`${oe}/api/meetings/${t}/transcriptions`,n=await fetch(a,{method:"DELETE",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}}),i=await n.json();if(console.log("ðŸ“¥ DELETE API response:",{status:n.status,ok:n.ok,success:i.success,deleted_count:i.deleted_count,message:i.message,full_result:i}),!n.ok)throw new Error(i.message||"Failed to delete transcriptions");return{success:!0,data:i}}catch(a){return console.error("âŒ Delete transcriptions by type error:",a),{success:!1,message:a.message||"Verbindingsfout"}}}async deleteTranscription(t){try{const r=await fetch(`${oe}/api/transcriptions/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to delete transcription");return{success:!0,data:a}}catch(r){return console.error("Delete transcription error:",r),{success:!1,message:r.message||"Verbindingsfout"}}}async saveTranscription(t){try{const r=await fetch(`${oe}/api/transcriptions`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to save transcription");return a}catch(r){return console.error("Save transcription error:",r),{success:!1,message:r.message||"Verbindingsfout"}}}async updateTranscription(t,r){try{const a=await fetch(`${oe}/api/transcriptions/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await a.json();if(!a.ok)throw new Error(n.message||"Failed to update transcription");return n}catch(a){return console.error("Update transcription error:",a),{success:!1,message:a.message||"Verbindingsfout"}}}async getTranscription(t){try{const r=await fetch(`${oe}/api/transcriptions/${t}`,{headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to get transcription");return a}catch(r){return console.error("Get transcription error:",r),{success:!1,message:r.message||"Verbindingsfout"}}}async uploadAudioForTranscription(t,r,a={}){try{const n=new FormData;n.append("audio",r),n.append("meeting_id",t),Object.keys(a).forEach(h=>{n.append(h,a[h])});const i=await fetch(`${oe}/api/transcriptions/upload`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`},body:n}),o=await i.json();if(!i.ok)throw new Error(o.message||"Failed to upload audio");return o}catch(n){return console.error("Upload audio error:",n),{success:!1,message:n.message||"Verbindingsfout"}}}async getTranscriptionStats(t){try{const r=await fetch(`${oe}/api/meetings/${t}/transcriptions/stats`,{headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}}),a=await r.json();if(!r.ok)throw new Error(a.message||"Failed to get stats");return a}catch(r){return console.error("Get transcription stats error:",r),{success:!1,message:r.message||"Verbindingsfout"}}}async searchTranscriptions(t,r,a={}){try{const n=new URLSearchParams({q:r,...a}),i=await fetch(`${oe}/api/meetings/${t}/transcriptions/search?${n}`,{headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json"}}),o=await i.json();if(!i.ok)throw new Error(o.message||"Failed to search transcriptions");return o}catch(n){return console.error("Search transcriptions error:",n),{success:!1,message:n.message||"Verbindingsfout"}}}async exportTranscriptions(t,r="json",a={}){try{const n=new URLSearchParams({format:r,...a}),i=await fetch(`${oe}/api/meetings/${t}/transcriptions/export?${n}`,{headers:{Authorization:`Bearer ${F.getToken()}`}});if(!i.ok){const o=await i.json();throw new Error(o.message||"Failed to export transcriptions")}return r==="json"?await i.json():{success:!0,blob:await i.blob(),filename:`transcriptions_${t}.${r}`}}catch(n){return console.error("Export transcriptions error:",n),{success:!1,message:n.message||"Verbindingsfout"}}}}const fe=new Ua,Pe="http://localhost:8000";class Va{constructor(){this.currentSession=null,this.isRecording=!1,this.mediaRecorder=null,this.audioStream=null,this.speechRecognition=null,this.chunkInterval=null,this.audioChunks=[],this.chunkCounter=0,this.whisperUpdateCallback=null}async startEnhancedSession(t,r){try{console.log("ðŸš€ Starting enhanced session:",{meetingId:t,participants:r});const a=await fetch(`${Pe}/api/live-transcription/enhanced/start`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({meeting_id:t,participants:r})});if(!a.ok){const i=await a.text();throw new Error(`HTTP ${a.status}: ${i}`)}const n=await a.json();return n.success?(this.currentSession=n,console.log("âœ… Enhanced session started:",n)):console.error("âŒ Session start failed:",n),n}catch(a){return console.error("âŒ Failed to start enhanced session:",a),{success:!1,error:a.message}}}async setupVoiceProfile(t,r){if(!this.currentSession)throw new Error("No active session");try{console.log("ðŸŽ¤ Setting up voice profile for:",t);const a=new FormData;a.append("session_id",this.currentSession.session_id),a.append("speaker_id",t),a.append("voice_sample",r,`voice_${t}.webm`);const n=await fetch(`${Pe}/api/live-transcription/setup-voice`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"X-Requested-With":"XMLHttpRequest"},body:a});if(!n.ok){const o=await n.text();throw new Error(`HTTP ${n.status}: ${o}`)}const i=await n.json();return console.log("âœ… Voice profile setup result:",i),i}catch(a){return console.error("âŒ Failed to setup voice profile:",a),{success:!1,error:a.message}}}async processLiveTranscription(t,r=.8){if(!this.currentSession)throw new Error("No active session");try{const a=await fetch(`${Pe}/api/live-transcription/process-live`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({session_id:this.currentSession.session_id,live_text:t,confidence:r})});if(!a.ok){const i=await a.text();throw new Error(`HTTP ${a.status}: ${i}`)}return await a.json()}catch(a){return console.error("âŒ Failed to process live transcription:",a),{success:!1,error:a.message}}}async processWhisperVerification(t,r){if(!this.currentSession)throw new Error("No active session");try{console.log("ðŸ¤– Starting Whisper verification:",{session_id:this.currentSession.session_id,live_transcription_id:t,chunk_size:r.size,chunk_type:r.type}),this.notifyWhisperUpdate({type:"processing_start",message:"Whisper verwerking gestart...",timestamp:new Date().toISOString()});const a=await new Promise((o,h)=>{const d=new FileReader;d.onload=()=>{const c=d.result.split(",")[1];o(c)},d.onerror=h,d.readAsDataURL(r)}),n=await fetch(`${Pe}/api/live-transcription/verify-whisper`,{method:"POST",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({session_id:this.currentSession.session_id,transcription_id:t,audio_data:a})});if(console.log("ðŸ¤– Whisper API response status:",n.status),!n.ok){const o=await n.text();throw console.error("âŒ Whisper API error response:",o),this.notifyWhisperUpdate({type:"processing_error",error:`HTTP ${n.status}: ${o}`,message:"Whisper API fout",timestamp:new Date().toISOString()}),new Error(`HTTP ${n.status}: ${o}`)}const i=await n.json();return i.success?(console.log("âœ… Whisper verification completed:",{success:i.success,original_id:t,whisper_text:i.transcription?.text?.substring(0,50)+"...",database_saved:i.transcription?.database_saved}),this.notifyWhisperUpdate({type:"transcription_completed",transcription:{...i.transcription,database_saved:i.transcription?.database_saved||!1},message:i.transcription?.database_saved?"Transcriptie voltooid en opgeslagen":"Transcriptie voltooid",timestamp:new Date().toISOString()})):(console.error("âŒ Whisper verification failed:",i.error),this.notifyWhisperUpdate({type:"processing_error",error:i.error,message:"Whisper verwerking mislukt",timestamp:new Date().toISOString()})),i}catch(a){throw console.error("âŒ Whisper verification failed:",a),this.notifyWhisperUpdate({type:"processing_error",error:a.message,message:"Whisper verwerking mislukt",timestamp:new Date().toISOString()}),a}}async getWhisperTranscriptions(t){try{console.log("ðŸ¤– Fetching Whisper transcriptions for meeting:",t);const r=await fetch(`${Pe}/api/meetings/${t}/whisper-transcriptions`,{method:"GET",headers:{Authorization:`Bearer ${F.getToken()}`,"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}});if(!r.ok){const n=await r.text();throw new Error(`HTTP ${r.status}: ${n}`)}const a=await r.json();return a.success?(console.log("âœ… Whisper transcriptions fetched:",{count:a.meta?.total_count||a.data?.length||0,meeting_id:t}),{success:!0,transcriptions:a.data||[],meta:a.meta||{}}):(console.error("âŒ Failed to fetch Whisper transcriptions:",a.error),{success:!1,error:a.error,transcriptions:[]})}catch(r){return console.error("âŒ Whisper transcriptions fetch error:",r),{success:!1,error:r.message,transcriptions:[]}}}setWhisperUpdateCallback(t){this.whisperUpdateCallback=t}notifyWhisperUpdate(t){this.whisperUpdateCallback&&this.whisperUpdateCallback(t)}setupSpeechRecognition(t,r){const a=window.SpeechRecognition||window.webkitSpeechRecognition;return a?(this.speechRecognition=new a,this.speechRecognition.continuous=!0,this.speechRecognition.interimResults=!0,this.speechRecognition.lang="nl-NL",this.speechRecognition.onresult=n=>{for(let i=n.resultIndex;i<n.results.length;i++){const o=n.results[i][0].transcript,h=n.results[i][0].confidence||.8,d=n.results[i].isFinal;t({transcript:o,confidence:h,isFinal:d,timestamp:new Date})}},this.speechRecognition.onerror=n=>{console.warn("Speech recognition error:",n.error),n.error!=="no-speech"&&n.error!=="network"&&r(n.error)},this.speechRecognition.onend=()=>{this.isRecording&&setTimeout(()=>{try{this.speechRecognition.start()}catch(n){console.warn("Failed to restart speech recognition:",n)}},100)},!0):(r("Speech recognition not supported"),!1)}async startRecording(){try{return console.log("ðŸŽ¤ Starting recording..."),this.audioStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),this.isRecording=!0,this.audioChunks=[],this.chunkCounter=0,this.speechRecognition&&(this.speechRecognition.start(),console.log("ðŸŽ¤ Speech recognition started")),this.setupAudioChunking(),{success:!0}}catch(t){return console.error("âŒ Failed to start recording:",t),{success:!1,error:t.message}}}setupAudioChunking(){console.log("ðŸ”§ Setting up audio chunking...");const t=()=>{!this.isRecording||!this.audioStream||(console.log("ðŸ†• Starting new chunk cycle:",++this.chunkCounter),this.mediaRecorder=new MediaRecorder(this.audioStream,{mimeType:"audio/webm;codecs=opus"}),this.audioChunks=[],this.mediaRecorder.ondataavailable=r=>{r.data&&r.data.size>0&&this.audioChunks.push(r.data)},this.mediaRecorder.onstop=()=>{if(this.audioChunks.length>0){const r=new Blob(this.audioChunks,{type:"audio/webm"});console.log("ðŸŽµ Created 90-second audio chunk:",{size:r.size,type:r.type,chunk_number:this.chunkCounter,timestamp:new Date().toLocaleTimeString()}),this.onChunkCallback&&this.onChunkCallback(r)}this.isRecording&&setTimeout(t,500)},this.mediaRecorder.start(),setTimeout(()=>{this.mediaRecorder&&this.mediaRecorder.state==="recording"&&(console.log("â° 90 seconds reached, stopping chunk",this.chunkCounter),this.mediaRecorder.stop())},9e4))};t()}setChunkCallback(t){console.log("ðŸ”— Setting chunk callback for Whisper processing"),this.onChunkCallback=t}pauseRecording(){this.speechRecognition&&this.speechRecognition.stop(),console.log("â¸ï¸ Recording paused")}resumeRecording(){if(this.speechRecognition&&this.isRecording)try{this.speechRecognition.start(),console.log("â–¶ï¸ Recording resumed")}catch(t){console.warn("Failed to resume speech recognition:",t)}}stopRecording(){if(console.log("ðŸ›‘ Stopping recording..."),this.isRecording=!1,this.speechRecognition)try{this.speechRecognition.stop()}catch(t){console.warn("Warning stopping speech recognition:",t)}if(this.mediaRecorder&&this.mediaRecorder.state==="recording")try{this.mediaRecorder.stop()}catch(t){console.warn("Warning stopping MediaRecorder:",t)}this.audioStream&&this.audioStream.getTracks().forEach(t=>t.stop()),this.audioChunks=[],this.chunkCounter=0,console.log("âœ… Recording stopped and cleaned up")}async recordVoiceSample(t=5e3){try{const r=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new MediaRecorder(r),n=[];return new Promise((i,o)=>{a.ondataavailable=h=>n.push(h.data),a.onstop=()=>{const h=new Blob(n,{type:"audio/webm"});r.getTracks().forEach(d=>d.stop()),i(h)},a.onerror=h=>{r.getTracks().forEach(d=>d.stop()),o(h)},a.start(),setTimeout(()=>{a.state==="recording"&&a.stop()},t)})}catch(r){throw new Error("Failed to record voice sample: "+r.message)}}}const Q=new Va,Ha="http://localhost:8000",me=new Map,Ga=3e4,qa=s=>`api_${s}`,Yt=s=>s&&Date.now()-s.timestamp<Ga;class Ja{constructor(){this.baseURL=Ha}getHeaders(){const t={"Content-Type":"application/json",Accept:"application/json"},r=F.getToken();return r&&(t.Authorization=`Bearer ${r}`),t}clearCache(t=null){if(t)for(const r of me.keys())r.includes(t)&&me.delete(r);else me.clear()}async get(t,r=!0){const a=qa(t);if(r){const n=me.get(a);if(Yt(n))return console.log(`ðŸš€ Cache hit for: ${t}`),n.data}try{console.log(`ðŸ“¡ API call: GET ${t}`);const n=performance.now(),i=await fetch(`${this.baseURL}/api${t}`,{method:"GET",mode:"cors",headers:this.getHeaders()});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.json(),h=performance.now();return console.log(`âš¡ API response time: ${Math.round(h-n)}ms`),r&&i.ok&&me.set(a,{data:o,timestamp:Date.now()}),o}catch(n){throw console.error("API GET error:",n),n}}async post(t,r={}){try{console.log(`ðŸ“¡ API call: POST ${t}`);const a=performance.now(),n=await fetch(`${this.baseURL}/api${t}`,{method:"POST",mode:"cors",headers:this.getHeaders(),body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json(),o=performance.now();return console.log(`âš¡ API response time: ${Math.round(o-a)}ms`),i.status==="success"&&this.clearCache(t.split("/")[1]),i}catch(a){throw console.error("API POST error:",a),a}}async put(t,r={}){try{console.log(`ðŸ“¡ API call: PUT ${t}`);const a=performance.now(),n=await fetch(`${this.baseURL}/api${t}`,{method:"PUT",mode:"cors",headers:this.getHeaders(),body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const i=await n.json(),o=performance.now();return console.log(`âš¡ API response time: ${Math.round(o-a)}ms`),i.status==="success"&&this.clearCache(t.split("/")[1]),i}catch(a){throw console.error("API PUT error:",a),a}}async delete(t){try{console.log(`ðŸ“¡ API call: DELETE ${t}`);const r=performance.now(),a=await fetch(`${this.baseURL}/api${t}`,{method:"DELETE",mode:"cors",headers:this.getHeaders()});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const n=await a.json(),i=performance.now();return console.log(`âš¡ API response time: ${Math.round(i-r)}ms`),n.status==="success"&&this.clearCache(t.split("/")[1]),n}catch(r){throw console.error("API DELETE error:",r),r}}getCacheStats(){const t={size:me.size,keys:Array.from(me.keys()),validEntries:0};for(const[r,a]of me.entries())Yt(a)&&t.validEntries++;return t}async batchGet(t){const r=t.map(a=>this.get(a));return Promise.allSettled(r)}async healthCheck(){try{return await this.get("/health",!1)}catch{return{status:"error",message:"Health check failed"}}}}const ne=new Ja,Xe={getAgendaItems:async s=>{try{console.log("ðŸ” Fetching agenda items for meeting:",s);const t=await ne.get(`/meetings/${s}/agenda`);return console.log("âœ… Agenda items fetched successfully:",t.data),{success:!0,data:t.data.data||t.data,message:t.data.message||"Agenda items opgehaald"}}catch(t){return console.error("âŒ Error fetching agenda items:",{status:t.response?.status,statusText:t.response?.statusText,data:t.response?.data,message:t.message,meetingId:s}),{success:!1,data:[],message:t.response?.data?.message||t.message||"Fout bij ophalen agenda items"}}},updateAgendaItemStatus:async(s,t,r,a=null)=>{try{console.log("ðŸ”„ Updating agenda item status:",{meetingId:s,agendaItemId:t,status:r,completed:a});const n={status:r};a!==null&&(n.completed=a);const i=await ne.put(`/meetings/${s}/agenda/${t}/status`,n);return console.log("âœ… Agenda item status updated successfully:",i.data),i.data}catch(n){throw console.error("âŒ Error updating agenda item status:",{status:n.response?.status,statusText:n.response?.statusText,data:n.response?.data,message:n.message,meetingId:s,agendaItemId:t,requestData:{status:r,completed:a}}),n}},addAgendaItem:async(s,t)=>{try{console.log("âž• Adding agenda item:",{meetingId:s,agendaItemData:t});const r=await ne.post(`/meetings/${s}/agenda`,t);return console.log("âœ… Agenda item added successfully:",r.data),r.data}catch(r){throw console.error("âŒ Error adding agenda item:",{status:r.response?.status,statusText:r.response?.statusText,data:r.response?.data,message:r.message,meetingId:s,agendaItemData:t,url:`/meetings/${s}/agenda`}),r.response&&(console.error("Response headers:",r.response.headers),console.error("Response config:",r.response.config)),r}},deleteAgendaItem:async(s,t)=>{try{console.log("ðŸ—‘ï¸ Deleting agenda item:",{meetingId:s,agendaItemId:t});const r=await ne.delete(`/meetings/${s}/agenda/${t}`);return console.log("âœ… Agenda item deleted successfully:",r.data),r.data}catch(r){throw console.error("âŒ Error deleting agenda item:",{status:r.response?.status,statusText:r.response?.statusText,data:r.response?.data,message:r.message,meetingId:s,agendaItemId:t}),r}}},Xa=s=>{const t=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6B7280"];return t[s%t.length]},Ka=(s,t,r=1)=>{const a={...s};return a[t]||(a[t]={totalTime:0,segments:0}),a[t].totalTime+=r,a[t].segments+=1,a},Za=s=>`speaker_${s.toLowerCase().replace(/\s+/g,"_")}_${Date.now()}`,Qa=s=>!s||typeof s!="string"?!1:s.trim().length>0,Ya=({id:s,transcriptions:t,setTranscriptions:r,currentSpeaker:a,setCurrentSpeaker:n,availableSpeakers:i,setAvailableSpeakers:o,speakerStats:h,setSpeakerStats:d,currentAgendaIndex:c,setCurrentAgendaIndex:p,agendaStartTimes:u,setAgendaStartTimes:f,meeting:j})=>{const _=l.useCallback(v=>{if(console.log("ðŸ“ New transcription received:",v),!Qa(v.text)){console.warn("Invalid transcription text received");return}const S={id:`transcription_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,text:v.text.trim(),timestamp:v.timestamp||new Date,speaker:v.speaker||a?.displayName||"Onbekende Spreker",speakerId:v.speakerId||a?.id||"unknown_speaker",speakerColor:v.speakerColor||a?.color||"#6B7280",confidence:v.confidence||.8,isFinal:v.isFinal!==!1,processingStatus:v.processingStatus||"live",source:v.source||"live"};r(R=>[...R,S]),S.speakerId&&d(R=>Ka(R,S.speakerId,v.duration||1)),k(S)},[a,r,d]),k=l.useCallback(async v=>{try{console.log("ðŸ’¾ Saving transcription to database:",v);const S={meeting_id:parseInt(s),speaker_name:v.speaker||"Audio Upload",speaker_id:v.speakerId||"audio_upload",speaker_color:v.speakerColor||"#6B7280",text:v.text,confidence:v.confidence||.8,source:"upload",is_final:!0,spoken_at:new Date().toISOString()};console.log("ðŸ’¾ Database payload:",S);const R=await fe.saveTranscription(S);R.success?(r(y=>y.map(T=>T.id===v.id?{...T,dbId:R.data.id,saved:!0}:T)),console.log("âœ… Transcription saved to database:",R.data.id)):(console.error("âŒ Failed to save transcription:",R.message),console.error("âŒ Validation errors:",R.errors))}catch(S){console.error("âŒ Error saving transcription:",S)}},[s,r]),m=l.useCallback(v=>{console.log("ðŸ‘¤ Speaker changed to:",v.displayName),n(v),o(S=>S.map(R=>({...R,isActive:R.id===v.id})))},[n,o]),g=l.useCallback(v=>{if(!v.trim())return;const S={id:Za(v),name:v.trim(),displayName:v.trim(),role:"dynamic",color:getSpeakerColor(i.length),totalSpeakingTime:0,segmentCount:0,isActive:!1,isParticipant:!1};return o(R=>[...R,S]),d(R=>({...R,[S.id]:{totalTime:0,segments:0}})),console.log("âž• New speaker added:",S.displayName),S},[i.length,o,d]),C=l.useCallback(()=>{if(!j?.agenda_items||c>=j.agenda_items.length-1)return;const v=c+1;p(v),f(S=>({...S,[v]:new Date})),console.log(`ðŸ“‹ Moved to agenda item ${v+1}:`,j.agenda_items[v].title)},[j,c,p,f]),A=l.useCallback(()=>{if(c<=0)return;const v=c-1;p(v),console.log(`ðŸ“‹ Moved back to agenda item ${v+1}:`,j.agenda_items[v].title)},[c,p,j]),N=l.useCallback(v=>{!j?.agenda_items||v<0||v>=j.agenda_items.length||(p(v),f(S=>({...S,[v]:S[v]||new Date})),console.log(`ðŸ“‹ Jumped to agenda item ${v+1}:`,j.agenda_items[v].title))},[j,p,f]),b=l.useCallback(v=>{console.log("ðŸ“Š Session stats updated:",v)},[]),P=l.useCallback(async(v,S)=>{try{const R=await fe.updateTranscription(v,S);R.success?(r(y=>y.map(T=>T.dbId===v?{...T,...S,updated:!0}:T)),console.log("âœ… Transcription updated:",v)):console.error("Failed to update transcription:",R.message)}catch(R){console.error("Error updating transcription:",R)}},[r]),U=l.useCallback(async v=>{try{const S=await fe.deleteTranscription(v);S.success?(r(R=>R.filter(y=>y.dbId!==v)),console.log("ðŸ—‘ï¸ Transcription deleted:",v)):console.error("Failed to delete transcription:",S.message)}catch(S){console.error("Error deleting transcription:",S)}},[r]);return{handleTranscriptionReceived:_,handleSpeakerChange:m,handleAddSpeaker:g,handleNextAgendaItem:C,handlePreviousAgendaItem:A,handleGoToAgendaItem:N,handleSessionStatsUpdate:b,handleUpdateTranscription:P,handleDeleteTranscription:U}},J=({children:s,className:t="w-4 h-4"})=>e.jsx("span",{className:`inline-block ${t}`,style:{fontSize:"16px"},children:s}),es=({className:s})=>e.jsx(J,{className:s,children:"ðŸŽ¤"}),en=({className:s})=>e.jsx(J,{className:s,children:"â¹ï¸"}),Me=({className:s})=>e.jsx(J,{className:s,children:"â¬‡ï¸"}),Le=({className:s})=>e.jsx(J,{className:s,children:"â¬†ï¸"}),tn=({className:s})=>e.jsx(J,{className:s,children:"ðŸ—‘ï¸"}),ts=({className:s})=>e.jsx(J,{className:s,children:"ðŸ‘¥"}),ss=({className:s})=>e.jsx(J,{className:s,children:"ðŸ“„"}),sn=({className:s})=>e.jsx(J,{className:s,children:"âš™ï¸"}),_s=({className:s})=>e.jsx(J,{className:s,children:"â¬‡ï¸"}),rn=({className:s})=>e.jsx(J,{className:s,children:"ðŸ“¤"}),Ts=({className:s})=>e.jsx(J,{className:s,children:"âŒ¨ï¸"}),bt=({className:s})=>e.jsx(J,{className:s,children:"ðŸ›¡ï¸"}),an=({className:s})=>e.jsx(J,{className:s,children:"â–¶ï¸"}),nn=({className:s})=>e.jsx(J,{className:s,children:"â¸ï¸"}),on=({className:s})=>e.jsx(J,{className:s,children:"âœ…"}),rs=({className:s})=>e.jsx(J,{className:s,children:"ðŸ“…"}),ln=({className:s})=>e.jsx(J,{className:s,children:"âš ï¸"}),cn=({className:s})=>e.jsx(J,{className:s,children:"âœï¸"}),dn=({className:s})=>e.jsx(J,{className:s,children:"ðŸ’¾"}),un=({className:s})=>e.jsx(J,{className:s,children:"âŒ"}),hn=({meeting:s,isRecording:t,recordingTime:r,isAutoTranscriptionActive:a,onNavigateBack:n,formatTime:i})=>e.jsx("div",{className:"bg-white shadow-sm border-b border-slate-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:s.title}),e.jsx("p",{className:"text-slate-600"})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[t&&e.jsxs("div",{className:"flex items-center space-x-2 bg-red-50 text-red-700 px-4 py-2 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"font-medium",children:["Opname actief: ",i(r)]})]}),a&&e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 text-blue-700 px-4 py-2 rounded-lg",children:[e.jsx(Ts,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Auto-transcriptie actief"})]})]})]})})});class pn{constructor(){this.config=null,this.lastFetch=null,this.cacheTimeout=5*60*1e3}async fetchConfig(){try{if(!F.isAuthenticated())return console.warn("User not authenticated, using default config"),this.getDefaultConfig();console.log("ðŸ“¡ Fetching config with auth token...");const t=await ne.get("/config");return t.data&&t.data.success?(this.config=t.data.data,this.lastFetch=Date.now(),console.log("âœ… Config loaded successfully:",this.config),this.config):(console.warn("Config response not successful, using default"),this.getDefaultConfig())}catch(t){return console.error("Failed to fetch config:",t),t.message.includes("401")||t.message.includes("Unauthorized")?(console.warn("Authentication failed, using default config"),this.getDefaultConfig()):(console.warn("Using default config due to error:",t.message),this.getDefaultConfig())}}async getAllConfig(){return F.isAuthenticated()?this.config&&this.lastFetch&&Date.now()-this.lastFetch<this.cacheTimeout?this.config:await this.fetchConfig():(console.log("User not authenticated, returning default config"),this.getDefaultConfig())}getDefaultConfig(){return{transcription:{live_webspeech_enabled:!1,whisper_enabled:!0,whisper_chunk_duration:90,n8n_transcription_enabled:!1,default_transcription_service:"whisper",available_services:{whisper:!0,n8n:!1}},n8n:{auto_export_enabled:!1,auto_export_interval_minutes:10,webhook_url:null,api_key:null,transcription_enabled:!1,transcription_webhook_url:null,timeout_seconds:60},privacy:{filter_enabled:!0,data_retention_days:90,auto_delete_audio:!0},azure:{whisper_configured:!0}}}async getTranscriptionConfig(){try{return(await this.getAllConfig()).transcription||this.getDefaultConfig().transcription}catch{return console.warn("Failed to get transcription config, using default"),this.getDefaultConfig().transcription}}async getN8NConfig(){try{return(await this.getAllConfig()).n8n||this.getDefaultConfig().n8n}catch{return console.warn("Failed to get N8N config, using default"),this.getDefaultConfig().n8n}}async getPrivacyConfig(){try{return(await this.getAllConfig()).privacy||this.getDefaultConfig().privacy}catch{return console.warn("Failed to get privacy config, using default"),this.getDefaultConfig().privacy}}async isLiveTranscriptionEnabled(){return(await this.getTranscriptionConfig()).live_webspeech_enabled}async isWhisperEnabled(){return(await this.getTranscriptionConfig()).whisper_enabled}async isN8NTranscriptionEnabled(){return(await this.getN8NConfig()).transcription_enabled}async getWhisperChunkDuration(){return(await this.getTranscriptionConfig()).whisper_chunk_duration}async getDefaultTranscriptionService(){return(await this.getTranscriptionConfig()).default_transcription_service||"whisper"}async isN8NAutoExportEnabled(){return(await this.getN8NConfig()).auto_export_enabled}async getN8NAutoExportInterval(){return(await this.getN8NConfig()).auto_export_interval_minutes}async isN8NWebhookConfigured(){return!!(await this.getN8NConfig()).webhook_url}async testServices(){try{if(!F.isAuthenticated())throw new Error("Authentication required");const t=await ne.post("/transcription/test-services");if(t.data&&t.data.success)return t.data.data;throw new Error(t.data?.error||"Failed to test services")}catch(t){throw console.error("Failed to test services:",t),t}}clearCache(){this.config=null,this.lastFetch=null}}const mn=new pn,gn=({meetingId:s,participants:t=[],onTranscriptionUpdate:r=()=>{},onWhisperUpdate:a=()=>{},onSessionStatsUpdate:n=()=>{}})=>{const[i,o]=l.useState({live_webspeech_enabled:!1,whisper_enabled:!0,whisper_chunk_duration:90}),[h,d]=l.useState(!1),[c,p]=l.useState(!1),[u,f]=l.useState(null),[j,_]=l.useState("initial"),[k,m]=l.useState(0),[g,C]=l.useState(!1),[A,N]=l.useState(""),[b,P]=l.useState(!1),[U,v]=l.useState(""),[S,R]=l.useState(!1),[y,T]=l.useState(!1),[W,G]=l.useState(0),[H,Z]=l.useState(null),[w,D]=l.useState(""),[O,le]=l.useState(!1),[We,_e]=l.useState(!1),ie=l.useRef(null),se=l.useRef(null);l.useEffect(()=>{(async()=>{try{const M=await mn.getTranscriptionConfig();o(M),d(!0),console.log("ðŸ“‹ Transcriptie config geladen:",M)}catch(M){console.error("âŒ Fout bij laden transcriptie config:",M),d(!0)}})()},[]),l.useEffect(()=>{const $=window.SpeechRecognition||window.webkitSpeechRecognition;le(!!$)},[]),l.useEffect(()=>(S&&!y?ie.current=setInterval(()=>{G($=>$+1)},1e3):ie.current&&(clearInterval(ie.current),ie.current=null),()=>{ie.current&&clearInterval(ie.current)}),[S,y]),l.useEffect(()=>()=>{try{Q.stopRecording(),ie.current&&clearInterval(ie.current),se.current&&clearInterval(se.current)}catch($){console.error("Cleanup error:",$)}},[]);const Be=$=>{const M=Math.floor($/3600),V=Math.floor($%3600/60),B=$%60;return M>0?`${M.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`:`${V.toString().padStart(2,"0")}:${B.toString().padStart(2,"0")}`},Te=async $=>{try{P(!0),D(""),v("Initialiseren..."),console.log("ðŸš€ Starting enhanced session for meeting:",s),console.log("ðŸ“‹ Using config:",i),v("Deelnemers verwerken...");const M=t.map((B,ee)=>({id:B.id?`participant_${B.id}`:`participant_${B.name.toLowerCase().replace(/\s+/g,"_")}_${ee}`,name:B.name,color:B.color||"#6B7280"}));v("Verbinden met server...");const V=await Q.startEnhancedSession(s,M);console.log("Enhanced session result:",V),V.success?(v("Session gestart!"),p(!0),f(V.session_id),$&&t.length>0?(_("voice_setup"),m(0)):_("ready")):D(V.error||"Failed to start session")}catch(M){console.error("âŒ Enhanced session exception:",M),D("Failed to start enhanced session: "+M.message)}finally{P(!1),setTimeout(()=>v(""),2e3)}},Oe=async()=>{const $=t[k];if($){N(""),C(!0);try{const M=await Q.recordVoiceSample(5e3),V=$.id?`participant_${$.id}`:`participant_${$.name.toLowerCase().replace(/\s+/g,"_")}_${k}`,B=await Q.setupVoiceProfile(V,M);C(!1),B.success?N(""):N(B.error||"Voice setup failed")}catch(M){C(!1),N("Failed to record voice: "+M.message)}}},Ye=()=>{const $=k+1;$<t.length?(m($),N("")):(_("ready"),m(0))},ze=()=>{k>0&&(m(k-1),N(""))},et=async()=>{try{if(console.log("ðŸš€ Starting recording with config:",i),D(""),!i.live_webspeech_enabled&&!i.whisper_enabled){D("Geen transcriptie methoden ingeschakeld. Controleer de configuratie.");return}if(i.live_webspeech_enabled){if(!O){D("Speech recognition not supported in this browser");return}if(console.log("ðŸŽ¤ Setting up WebSpeech recognition..."),!Q.setupSpeechRecognition(Ve,xe)){D("Failed to setup speech recognition");return}}else console.log("ðŸ”‡ WebSpeech uitgeschakeld via configuratie");i.whisper_enabled?(console.log(`ðŸ¤– Setting up Whisper chunks (${i.whisper_chunk_duration}s intervals)...`),Q.setChunkCallback(st)):console.log("ðŸ”‡ Whisper transcriptie uitgeschakeld via configuratie");const $=await Q.startRecording();$.success?(R(!0),T(!1),G(0),Z(new Date),i.whisper_enabled&&Fe(),console.log("âœ… Recording started successfully"),console.log(`ðŸ“‹ WebSpeech: ${i.live_webspeech_enabled?"Enabled":"Disabled"}`),console.log(`ðŸ“‹ Whisper: ${i.whisper_enabled?"Enabled":"Disabled"} (${i.whisper_chunk_duration}s chunks)`)):D($.error)}catch($){console.error("âŒ Recording start error:",$),D("Failed to start recording: "+$.message)}},Fe=()=>{se.current&&clearInterval(se.current);const $=i.whisper_chunk_duration*1e3;se.current=setInterval(()=>{S&&!y&&i.whisper_enabled&&console.log(`â° Whisper chunk timer triggered (${i.whisper_chunk_duration}s interval)`)},$)},Ue=()=>{se.current&&(clearInterval(se.current),se.current=null)},$t=()=>{try{Q.pauseRecording(),T(!0),Ue(),console.log("â¸ï¸ Recording paused")}catch($){console.error("âŒ Error pausing recording:",$),D("Error pausing recording: "+$.message)}},Pt=()=>{try{Q.resumeRecording(),T(!1),i.whisper_enabled&&Fe(),console.log("â–¶ï¸ Recording resumed")}catch($){console.error("âŒ Error resuming recording:",$),D("Error resuming recording: "+$.message)}},tt=()=>{try{Q.stopRecording(),R(!1),T(!1),G(0),Z(null),Ue(),console.log("â¹ï¸ Recording stopped")}catch($){console.error("âŒ Error stopping recording:",$),D("Error stopping recording: "+$.message)}},Ve=async $=>{if(!i.live_webspeech_enabled){console.log("ðŸ”‡ WebSpeech transcription skipped (disabled in config)");return}const{transcript:M,confidence:V,isFinal:B}=$;if(!(!B||!M.trim()))try{_e(!0),console.log("ðŸŽ¤ Processing WebSpeech transcription:",M.substring(0,50)+"..."),console.log("ðŸ“¤ Calling API with transcript...");const ee=await Q.processLiveTranscription(M.trim(),V);if(console.log("ðŸ“¥ API Response:",{success:ee.success,transcription_id:ee.transcription?.id,error:ee.error}),ee.success&&ee.transcription){const te=ee.transcription;console.log("âœ… Transcription created with ID:",te.id),r({...te,source:"background_live",confidence:V}),ee.session_stats&&n(ee.session_stats),console.log("ðŸ• Adding to Whisper waiting queue with correct ID:",te.id),i.whisper_enabled&&(window.lastTranscriptionForWhisper={id:te.id,text:te.text,timestamp:new Date().toISOString()},console.log("ðŸ“ Stored for Whisper verification:",window.lastTranscriptionForWhisper))}else console.error("âŒ API call failed:",ee.error)}catch(ee){console.error("âŒ Background transcription error:",ee)}finally{_e(!1)}},st=async $=>{if(!i.whisper_enabled){console.log("ðŸ”‡ Whisper chunk processing skipped (disabled in config)");return}try{console.log("ðŸŽµ Processing audio chunk with Whisper...",{size:$.size,timestamp:new Date().toLocaleTimeString(),chunkDuration:i.whisper_chunk_duration+"s"});let M=`background_${Date.now()}`;if(window.lastTranscriptionForWhisper&&window.lastTranscriptionForWhisper.id)M=window.lastTranscriptionForWhisper.id,console.log("âœ… Using real transcription ID for Whisper:",M),delete window.lastTranscriptionForWhisper;else{console.log("âš ï¸ No recent transcription found, using fallback ID:",M);try{console.log("ðŸ“ Creating transcription entry for audio chunk...");const B=await Q.processLiveTranscription("Audio chunk transcriptie wordt verwerkt...",.5);B.success&&B.transcription&&(M=B.transcription.id,console.log("âœ… Created transcription entry with ID:",M))}catch(B){console.warn("âŒ Failed to create transcription entry:",B.message)}}const V=await Q.processWhisperVerification(M,$);if(V.success&&V.transcription){const B={...V.transcription,source:"background_whisper",confidence:V.transcription.text_confidence||1,database_saved:V.transcription.database_saved||!1};console.log("âœ… Whisper transcription completed:",{text_preview:B.text.substring(0,50)+"...",database_saved:B.database_saved,processing_status:B.processing_status,transcription_id:M,chunk_duration:i.whisper_chunk_duration+"s"}),r(B),a&&a({type:"transcription_completed",transcription:B,message:B.database_saved?"Whisper transcriptie opgeslagen in database":"Whisper transcriptie verwerkt",timestamp:new Date().toISOString()})}else console.warn("âš ï¸ Whisper processing failed:",V.error),a&&a({type:"processing_error",error:V.error,message:"Whisper verwerking mislukt",timestamp:new Date().toISOString()})}catch(M){console.error("âŒ Background Whisper processing error:",M),a&&a({type:"processing_error",error:M.message,message:"Fout bij Whisper verwerking",timestamp:new Date().toISOString()})}},xe=$=>{$==="not-allowed"?D("Microfoon toegang geweigerd. Sta microfoon toegang toe."):$!=="no-speech"&&$!=="network"&&console.warn("Speech recognition error:",$)},He=$=>{console.log("ðŸ” Voice setup button clicked:",{useVoiceSetup:$,meetingId:s,participants:t}),b||Te($)};if(!h)return e.jsx("div",{className:"bg-white rounded-lg border",children:e.jsx("div",{className:"p-6 text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Configuratie laden..."})]})})});if(j==="initial"&&!c)return e.jsx("div",{className:"bg-white rounded-lg border",children:e.jsx("div",{className:"p-6 text-center",children:b?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-blue-600 font-medium",children:"Session wordt gestart..."})]}),U&&e.jsx("div",{className:"text-sm text-gray-600 bg-blue-50 p-3 rounded-lg",children:U}),e.jsx("p",{className:"text-xs text-gray-500",children:"Dit kan even duren, de server wordt opgestart..."})]}):e.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Kies of je stemherkenning wilt instellen voor betere spreker identificatie"}),e.jsx("button",{onClick:()=>He(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!O||t.length===0||b,children:"ðŸŽ¤ Start met Voice Setup"}),e.jsx("button",{onClick:()=>He(!1),className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!O||b,children:"â­ï¸ Setup Overslaan"}),!O&&e.jsx("p",{className:"text-xs text-red-600 mt-4",children:"Speech recognition niet ondersteund. Gebruik Chrome of Edge."}),t.length===0&&e.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"Geen deelnemers gevonden. Voice setup niet mogelijk."}),!i.live_webspeech_enabled&&!i.whisper_enabled&&e.jsx("div",{className:"text-xs text-red-600 mt-4 p-3 bg-red-50 rounded",children:"âš ï¸ Waarschuwing: Beide transcriptie methoden zijn uitgeschakeld in de configuratie."})]})})});if(j==="voice_setup"){const $=t[k],M=k>=t.length-1;return e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsx("div",{className:"p-4 border-b bg-blue-50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-medium text-blue-800",children:["ðŸŽ¤ Voice Setup - ",k+1," van ",t.length]}),e.jsx("button",{onClick:()=>_("ready"),className:"text-sm bg-gray-300 hover:bg-gray-400 text-gray-700 py-1 px-3 rounded",children:"â­ï¸ Setup Overslaan"})]})}),e.jsxs("div",{className:"p-6",children:[$?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white text-lg font-bold",style:{backgroundColor:$.color||"#6B7280"},children:$.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium",children:$.name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Spreek je naam en een korte zin voor stemherkenning"})]})]}),e.jsx("div",{className:"text-center mb-6",children:g?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Opname bezig... (5 seconden)"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Spreek nu duidelijk in de microfoon"})]}):e.jsx("button",{onClick:Oe,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg",disabled:g,children:"ðŸŽ¤ Start Stem Opname"})}),!g&&e.jsxs("div",{className:"flex justify-center space-x-3 mb-4",children:[e.jsx("button",{onClick:ze,disabled:k===0,className:`bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded ${k===0?"opacity-50 cursor-not-allowed":""}`,children:"â† Vorige"}),M?e.jsx("button",{onClick:()=>_("ready"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"âœ… Setup Voltooien"}):e.jsx("button",{onClick:Ye,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded",children:"Volgende â†’"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"âŒ"}),e.jsx("p",{className:"text-red-600",children:"Fout: Geen deelnemer gevonden"})]}),A&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-3 rounded text-sm",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:A}),e.jsx("button",{onClick:()=>N(""),className:"text-red-500 hover:text-red-700",children:"âœ•"})]})}),e.jsx("div",{className:"flex justify-center space-x-2 mt-6",children:t.map((V,B)=>e.jsx("div",{className:`w-3 h-3 rounded-full cursor-pointer transition-all ${B<k?"bg-green-500":B===k?"bg-blue-500":"bg-gray-300"}`,onClick:()=>!g&&m(B),title:V.name},B))})]})]})}return e.jsxs("div",{className:"bg-white rounded-lg border",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-gray-50",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${S&&!y?"bg-red-500 animate-pulse":y?"bg-yellow-500":"bg-gray-300"}`}),e.jsx("span",{className:"text-gray-600",children:S&&!y?`Recording (${i.whisper_chunk_duration}s chunks)`:y?"Gepauzeerd":"Gestopt"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[i.live_webspeech_enabled&&e.jsxs("span",{className:"text-blue-600 flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:"WebSpeech"})]}),i.whisper_enabled&&e.jsxs("span",{className:"text-purple-600 flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{children:"Whisper"})]}),We&&e.jsxs("span",{className:"text-green-600 flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{children:"Processing..."})]})]})]}),w&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 p-3 text-sm",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:w}),e.jsx("button",{onClick:()=>D(""),className:"text-red-500 hover:text-red-700",children:"âœ•"})]})}),!i.live_webspeech_enabled&&!i.whisper_enabled&&e.jsx("div",{className:"bg-orange-50 border-l-4 border-orange-400 text-orange-700 p-3 text-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsx("span",{children:"Alle transcriptie methoden zijn uitgeschakeld in de configuratie."})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl font-mono text-slate-800 mb-2",children:Be(W)}),e.jsx("div",{className:"text-sm text-slate-600",children:S?e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${y?"bg-yellow-500":"bg-red-500 animate-pulse"}`}),e.jsx("span",{children:y?"Opname gepauzeerd":`${i.whisper_chunk_duration}s chunks actief sinds ${H?H.toLocaleTimeString("nl-NL"):""}`})]}):"Opname gestopt"})]}),S&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Actieve Transcriptie Methoden:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded ${i.live_webspeech_enabled?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${i.live_webspeech_enabled?"bg-blue-500":"bg-gray-400"}`}),e.jsx("span",{children:"ðŸŽ¤ Live WebSpeech"}),e.jsx("span",{className:"text-xs",children:i.live_webspeech_enabled?"Actief":"Uit"})]}),e.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded ${i.whisper_enabled?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-500"}`,children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${i.whisper_enabled?"bg-purple-500":"bg-gray-400"}`}),e.jsx("span",{children:"ðŸ¤– Whisper AI"}),e.jsx("span",{className:"text-xs",children:i.whisper_enabled?`${i.whisper_chunk_duration}s`:"Uit"})]})]})]}),e.jsx("div",{className:"flex justify-center space-x-4",children:S?e.jsxs(e.Fragment,{children:[y?e.jsx("button",{onClick:Pt,className:"bg-green-600 hover:bg-green-700 text-white font-medium px-6 py-3 rounded-lg",children:"â–¶ï¸ Hervatten"}):e.jsx("button",{onClick:$t,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-medium px-6 py-3 rounded-lg",children:"â¸ï¸ Pauzeren"}),e.jsx("button",{onClick:tt,className:"bg-red-600 hover:bg-red-700 text-white font-medium px-6 py-3 rounded-lg",children:"â¹ï¸ Stoppen"})]}):e.jsx("button",{onClick:et,className:"bg-green-600 hover:bg-green-700 text-white font-medium px-6 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",disabled:!O&&i.live_webspeech_enabled||!i.live_webspeech_enabled&&!i.whisper_enabled,children:"ðŸŽ¤ Start Opname"})}),e.jsxs("div",{className:"mt-4 text-center",children:[!O&&i.live_webspeech_enabled&&e.jsx("p",{className:"text-xs text-red-600 mb-2",children:"Speech recognition niet ondersteund. Gebruik Chrome of Edge."}),i.live_webspeech_enabled&&i.whisper_enabled&&e.jsxs("p",{className:"text-xs text-green-600",children:["âœ… Dual transcriptie actief: WebSpeech (real-time) + Whisper AI (",i.whisper_chunk_duration,"s chunks)"]})]})]})]})},xn=({onTranscriptionReceived:s,meetingId:t=null,disabled:r=!1})=>{const[a,n]=l.useState(!1),[i,o]=l.useState(!1),[h,d]=l.useState(null),[c,p]=l.useState(0),[u,f]=l.useState(""),[j,_]=l.useState(null),k=l.useRef(null),m=l.useRef(null),g=l.useRef(null),C=l.useRef([]),A=async()=>{try{f("");const v=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});m.current=v;let S="audio/webm;codecs=opus";MediaRecorder.isTypeSupported("audio/wav")?S="audio/wav":MediaRecorder.isTypeSupported("audio/webm")&&(S="audio/webm"),console.log("Recording with format:",S);const R=new MediaRecorder(v,{mimeType:S,audioBitsPerSecond:128e3});k.current=R,C.current=[],R.ondataavailable=y=>{y.data.size>0&&C.current.push(y.data)},R.onstop=()=>{const y=new Blob(C.current,{type:S});d(y),console.log("Recording stopped. Blob size:",y.size,"bytes")},R.start(),n(!0),p(0),g.current=setInterval(()=>{p(y=>y+1)},1e3)}catch(v){console.error("Error starting recording:",v),f("Kon opname niet starten. Controleer microfoon toegang.")}},N=()=>{k.current&&k.current.state!=="inactive"&&k.current.stop(),m.current&&m.current.getTracks().forEach(v=>v.stop()),g.current&&clearInterval(g.current),n(!1)},b=async()=>{if(!h){f("Geen audio opgenomen");return}o(!0),f("");try{const v=localStorage.getItem("token");if(!v)throw new Error("Niet ingelogd");console.log("Uploading audio blob:",h.size,"bytes");const S=new FormData,R=h.type.includes("wav")?"wav":h.type.includes("mp4")?"m4a":"webm";S.append("audio",h,`recording_${Date.now()}.${R}`),t&&S.append("meeting_id",t);const T=await(await fetch("http://localhost:8000/api/audio/upload",{method:"POST",headers:{Authorization:`Bearer ${v}`,Accept:"application/json"},body:S})).json();if(console.log("Upload result:",T),T.success){const W=T.data.transcription;if(W.success){const G={text:W.text,language:W.language,duration:W.duration||c,timestamp:new Date,speaker:"Audio Upload",filename:T.data.filename};_(G),s&&s(G)}else f("Transcriptie mislukt: "+W.error);d(null),p(0)}else throw new Error(T.message||"Upload mislukt")}catch(v){console.error("Upload error:",v),f(`Upload fout: ${v.message}`)}finally{o(!1)}},P=()=>{d(null),p(0),f(""),_(null)},U=v=>{const S=Math.floor(v/60),R=v%60;return`${S.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"bg-white rounded-lg border p-6",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Audio Opname â†’ Opslaan â†’ Whisper"}),u&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded mb-4",children:u}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-2 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a?"bg-red-500 animate-pulse":h?"bg-blue-500":"bg-gray-300"}`}),e.jsx("span",{className:"text-sm text-gray-600",children:a?"Opname actief...":h?"Opname gereed voor upload":"Klaar voor opname"})]}),e.jsx("div",{className:"text-2xl font-mono text-gray-900 mb-4",children:U(c)}),e.jsxs("div",{className:"space-y-3",children:[!a&&!h&&!i&&e.jsx("button",{onClick:A,disabled:r,className:"bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white px-6 py-3 rounded-full text-lg font-medium",children:"ðŸŽ¤ Start Opname"}),a&&e.jsx("button",{onClick:N,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-full text-lg font-medium",children:"â¹ï¸ Stop Opname"}),h&&!i&&e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full text-lg font-medium",children:"ðŸ“¤ Upload & Transcribeer"}),e.jsx("button",{onClick:P,className:"bg-gray-400 hover:bg-gray-500 text-white px-4 py-3 rounded-full",children:"ðŸ”„ Opnieuw"})]}),i&&e.jsx("button",{disabled:!0,className:"bg-blue-400 text-white px-6 py-3 rounded-full text-lg font-medium opacity-75",children:"â³ Uploaden & Verwerken..."})]})]}),h&&e.jsxs("div",{className:"border-t pt-4 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Opname preview:"}),e.jsx("audio",{controls:!0,src:URL.createObjectURL(h),className:"w-full"})]}),j&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Laatste transcriptie:"}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("p",{className:"text-sm text-gray-900",children:j.text}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Bestand: ",j.filename," â€¢ Taal: ",j.language," â€¢ Duur: ",j.duration,"s"]})]})]})]})},fn=({isExpanded:s,onToggle:t,recordingMode:r,onSelectRecordingMode:a,isRecording:n,recordingTime:i,recordingStartTime:o,onStartManualRecording:h,onStartAutoTranscription:d,onPauseRecording:c,onStopRecording:p,onLiveTranscriptionReceived:u,onWhisperTranscriptionReceived:f,meetingId:j,meeting:_,formatTime:k,onRefresh:m,isRefreshing:g=!1})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-red-50 to-red-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 cursor-pointer hover:opacity-80 transition-opacity",onClick:t,children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-red-500 animate-pulse":"bg-gray-300"}`}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"ðŸŽ¤ Opname Meeting"}),n&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:k(i)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:C=>{C.stopPropagation(),m("recording")},disabled:g||n,className:`p-2 rounded-lg border transition-colors ${g||n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-red-600 hover:bg-red-50 border-red-200 shadow-sm"}`,title:n?"Kan niet verversen tijdens opname":"Vernieuw meeting gegevens",children:e.jsx("svg",{className:`w-4 h-4 ${g?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:t,className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",children:s?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Me,{className:"w-4 h-4"})})]})]}),s&&e.jsxs("div",{className:"p-6",children:[g&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4 text-red-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm text-red-800",children:"Meeting gegevens worden vernieuwd..."})]})}),e.jsxs("div",{className:`mb-6 ${g?"opacity-60":""}`,children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Selecteer Opname Modus"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>a("manual"),disabled:g||n,className:`p-4 rounded-lg border-2 transition-all text-left ${r==="manual"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${g||n?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(es,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-medium text-gray-800",children:"Handmatige Opname"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Start handmatige audio opname zonder automatische transcriptie"})]}),e.jsxs("button",{onClick:()=>a("automatic"),disabled:g||n,className:`p-4 rounded-lg border-2 transition-all text-left ${r==="automatic"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${g||n?"opacity-50 cursor-not-allowed":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(Ts,{className:"w-5 h-5 text-blue-600"}),e.jsx("h5",{className:"font-medium text-gray-800",children:"Automatische Opname"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Start opname met automatische real-time transcriptie"})]})]})]}),r==="manual"&&e.jsxs("div",{className:`border-t pt-6 ${g?"opacity-60":""}`,children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-4",children:"ðŸ“ Handmatige Audio Opname"}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl font-mono text-slate-800 mb-2",children:k(i)}),e.jsx("div",{className:"text-sm text-slate-600",children:n?e.jsxs("span",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),e.jsxs("span",{children:["Handmatige opname actief sinds ",o?o.toLocaleTimeString("nl-NL"):""]})]}):"Opname gestopt"})]}),e.jsx("div",{className:"flex justify-center space-x-4 mb-6",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:c,className:"bg-yellow-600 text-white px-4 py-3 rounded-lg hover:bg-yellow-700 transition-colors flex items-center",children:[e.jsx(nn,{className:"w-4 h-4 mr-2"}),"Pauzeer"]}),e.jsxs("button",{onClick:p,className:"bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 transition-colors flex items-center",children:[e.jsx(en,{className:"w-4 h-4 mr-2"}),"Stop"]})]}):e.jsxs("button",{onClick:h,disabled:g,className:`bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors flex items-center ${g?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(an,{className:"w-4 h-4 mr-2"}),"Start Handmatige Opname"]})}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-3",children:"Of upload een audio bestand:"}),e.jsx(xn,{onTranscriptionReceived:f,meetingId:j,disabled:n||g})]})]}),r==="automatic"&&e.jsx("div",{className:`border-t pt-6 ${g?"opacity-60":""}`,children:e.jsx(gn,{meetingId:j,participants:_?.participants||[],onTranscriptionUpdate:u,onWhisperUpdate:f,onSessionStatsUpdate:()=>{},disabled:g})}),(r==="none"||!r)&&e.jsxs("div",{className:`text-center py-8 text-gray-500 ${g?"opacity-60":""}`,children:[e.jsx(es,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Selecteer een opname modus om te beginnen"})]}),g&&e.jsxs("div",{className:"space-y-3 animate-pulse mt-4",children:[e.jsx("div",{className:"h-4 bg-red-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-red-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-red-200 rounded w-2/3"})]})]})]}),as=s=>{if(!s)return"Nu";const t=new Date(s);if(isNaN(t.getTime()))return"Nu";const a=new Date-t,n=Math.floor(a/(1e3*60)),i=Math.floor(a/(1e3*60*60));return n<1?"Nu":n<60?`${n} min geleden`:i<24?`${i} uur geleden`:t.toLocaleDateString("nl-NL",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},bn=({isExpanded:s,onToggle:t,whisperTranscriptions:r,onDeleteTranscriptions:a,isDeleting:n=!1,meetingId:i,onRefresh:o,isRefreshing:h=!1})=>{const[d,c]=l.useState(""),[p,u]=l.useState([]),[f,j]=l.useState(null),_=vt.useMemo(()=>{const g=[...p.map(b=>({...b,source:"realtime"})),...r.map(b=>({...b,source:"database"}))],C=[],A=new Set,N=g.sort((b,P)=>new Date(P.timestamp||P.created_at)-new Date(b.timestamp||b.created_at));for(const b of N){const P=b.id;A.has(P)||(A.add(P),C.push(b))}return C},[p,r]);l.useEffect(()=>{let g;return s&&i&&(g=setInterval(async()=>{await k()},3e4)),()=>{g&&clearInterval(g)}},[s,i]);const k=async()=>{try{console.log("ðŸ”„ Auto-refreshing Whisper transcriptions from database...");const g=await Q.getWhisperTranscriptions(i);g.success&&o&&(o("whisperTranscription",g.transcriptions),j(new Date),console.log("âœ… Database transcriptions refreshed successfully"))}catch(g){console.error("âŒ Failed to refresh database transcriptions:",g)}},m=async()=>{o&&(await o("whisperTranscription"),await k())};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 cursor-pointer hover:opacity-80 transition-opacity",onClick:t,children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Whisper Transcriptie"}),e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[_.length," items"]}),p.length>0&&e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full animate-pulse",children:[p.length," live"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[d&&e.jsx("div",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:d}),_.length>0&&e.jsx("button",{onClick:g=>{g.stopPropagation(),a("whisper")},disabled:n||h,className:`p-1 rounded hover:bg-red-100 text-red-600 transition-colors ${n||h?"opacity-50 cursor-not-allowed":""}`,title:"Wis whisper transcripties",children:e.jsx(tn,{className:"w-4 h-4"})}),e.jsx("button",{onClick:g=>{g.stopPropagation(),m()},disabled:h||n,className:`p-2 rounded-lg border transition-colors ${h||n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-green-600 hover:bg-green-50 border-green-200 shadow-sm"}`,title:"Vernieuw Whisper transcripties",children:e.jsx("svg",{className:`w-4 h-4 ${h?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:t,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:s?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Me,{className:"w-4 h-4"})})]})]}),s&&e.jsxs("div",{className:`p-4 space-y-3 max-h-96 overflow-y-auto ${h||n?"opacity-60":""}`,children:[_.map((g,C)=>{const A=g.source==="realtime",N=`${g.source||"unknown"}-${g.id||"no-id"}-${C}`;return e.jsxs("div",{className:`flex space-x-3 p-3 rounded-lg border transition-all duration-300 ${A?"bg-blue-50 border-blue-200 animate-pulse":"hover:bg-green-50 border-green-100"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white text-xs font-medium",style:{backgroundColor:g.speakerColor||g.speaker_color||"#10B981"},children:(g.speaker||g.speaker_name||"S").charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium text-slate-900",children:g.speaker||g.speaker_name}),e.jsx("span",{className:"text-xs text-slate-500",children:g.timestamp?as(g.timestamp):g.created_at?as(g.created_at):"Nu"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${A?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:A?"Live":"Whisper"}),g.database_saved&&e.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:"ðŸ’¾ Opgeslagen"}),g.processing_status==="whisper_processing"&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded animate-pulse",children:"â³ Verwerken"}),g.confidence&&e.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:[Math.round(parseFloat(g.confidence)*100),"%"]})]}),e.jsx("p",{className:`text-slate-700 leading-relaxed ${A?"font-semibold":"font-medium"}`,children:g.text}),g.metadata&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Status: ",g.metadata.processing_status," | Chunk: ",g.metadata.chunk_number,g.metadata.whisper_language&&` | Taal: ${g.metadata.whisper_language}`]})]})]},N)}),_.length===0&&!h&&!d&&e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx(sn,{className:"w-12 h-12 mx-auto mb-4 text-slate-300"}),e.jsx("p",{children:"Geen Whisper transcripties"}),e.jsx("p",{className:"text-sm",children:"Audio chunks worden automatisch verwerkt"})]}),h&&_.length===0&&e.jsx("div",{className:"space-y-3",children:[1,2,3].map(g=>e.jsxs("div",{className:"flex space-x-3 p-3 rounded-lg border border-green-100 animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-green-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-4 bg-green-200 rounded w-20"}),e.jsx("div",{className:"h-3 bg-green-100 rounded w-16"}),e.jsx("div",{className:"h-3 bg-green-100 rounded w-12"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-10"})]}),e.jsx("div",{className:"h-4 bg-green-100 rounded w-full"}),e.jsx("div",{className:"h-4 bg-green-100 rounded w-3/4"})]})]},`skeleton-${g}`))})]}),s&&f&&e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-between",children:[e.jsx("span",{children:"Laatste database sync:"}),e.jsx("span",{children:f.toLocaleTimeString("nl-NL")})]})}),s&&_.length>0&&e.jsx("div",{className:`px-4 pb-4 border-t border-gray-200 ${h||n?"opacity-60":""}`,children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center text-xs text-gray-600 pt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-600",children:r.length}),e.jsx("div",{children:"Database"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-blue-600",children:p.length}),e.jsx("div",{children:"Real-time"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-purple-600",children:_.length}),e.jsx("div",{children:"Totaal"})]})]})})]})},jn=({isExpanded:s,onToggle:t,meeting:r,setMeeting:a,currentAgendaIndex:n,onToggleAgendaItem:i,calculateAgendaProgress:o,onMeetingUpdate:h,onAgendaRefresh:d,isRefreshing:c=!1})=>{const[p,u]=l.useState(!1),[f,j]=l.useState(!1),[_,k]=l.useState(!1),[m,g]=l.useState(null),[C,A]=l.useState({title:"",description:"",estimated_duration:""}),N=y=>{a&&r&&a(T=>{const W={...T};return y(W),W})},b=()=>{d?d():h&&h()},P=(y,T)=>{T?.stopPropagation(),!(p||c)&&(g(y),k(!0))},U=async()=>{if(!m)return;const y={...m},T=r.agenda_items.findIndex(W=>W.id===m.id);N(W=>{W.agenda_items=W.agenda_items.filter(G=>G.id!==m.id)}),k(!1),g(null);try{await Xe.deleteAgendaItem(r.id,y.id),console.log("âœ… Agenda item deleted from database")}catch(W){console.error("âŒ Failed to delete agenda item from database:",W),N(G=>{G.agenda_items||(G.agenda_items=[]),G.agenda_items.splice(T,0,y)}),alert("Fout bij verwijderen agenda item. Het item is teruggezet.")}},v=async(y,T)=>{if(p||c)return;const W=!(T.completed||T.status==="completed"),G=W?"completed":"pending";console.log(`ðŸ”„ Toggling agenda item ${y}: ${T.completed} -> ${W}`),N(H=>{H.agenda_items&&H.agenda_items[y]&&(H.agenda_items[y]={...H.agenda_items[y],status:G,completed:W,completed_at:W?new Date().toISOString():null})});try{await Xe.updateAgendaItemStatus(r.id,T.id,G,W),console.log("âœ… Agenda item status updated in database")}catch(H){console.error("âŒ Failed to update agenda item in database:",H),N(Z=>{Z.agenda_items&&Z.agenda_items[y]&&(Z.agenda_items[y]={...Z.agenda_items[y],status:T.status,completed:T.completed,completed_at:T.completed_at})}),alert("Fout bij bijwerken agenda item. De wijziging is teruggedraaid.")}},S=async y=>{if(y.preventDefault(),!C.title.trim()||c)return;const T={...C},W=`temp_${Date.now()}`,G={id:W,title:T.title,description:T.description,estimated_duration:T.estimated_duration?parseInt(T.estimated_duration):null,status:"pending",completed:!1,order:(r?.agenda_items?.length||0)+1,completed_at:null};N(H=>{H.agenda_items||(H.agenda_items=[]),H.agenda_items.push(G)}),A({title:"",description:"",estimated_duration:""}),j(!1);try{const H=await Xe.addAgendaItem(r.id,{title:T.title,description:T.description,estimated_duration:T.estimated_duration?parseInt(T.estimated_duration):null});console.log("âœ… Agenda item added to database:",H.data),H.data&&H.data.data&&N(Z=>{const w=Z.agenda_items.findIndex(D=>D.id===W);w!==-1&&(Z.agenda_items[w]={...H.data.data,completed:H.data.data.status==="completed"})})}catch(H){console.error("âŒ Failed to add agenda item to database:",H),N(Z=>{Z.agenda_items=Z.agenda_items.filter(w=>w.id!==W)}),A(T),j(!0),alert("Fout bij toevoegen agenda item. Probeer opnieuw.")}},R=y=>{y.stopPropagation(),!c&&!p&&b()};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-green-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 cursor-pointer hover:opacity-80 transition-opacity",onClick:t,children:[e.jsx(rs,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-green-900",children:"Agenda"}),e.jsx("p",{className:"text-sm text-green-700",children:r?.agenda_items?.length>0?`${r.agenda_items.filter(y=>y.completed||y.status==="completed").length} van ${r.agenda_items.length} voltooid`:"Geen agenda items"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[r?.agenda_items?.length>0&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium text-green-800",children:[o(),"% voltooid"]}),e.jsx("div",{className:"w-20 bg-green-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${o()}%`}})})]}),e.jsx("button",{onClick:R,disabled:c||p,className:`p-2 rounded-lg border transition-colors ${c||p?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-green-600 hover:bg-green-50 border-green-200 shadow-sm"}`,title:"Vernieuw alleen agenda gegevens",children:e.jsx("svg",{className:`w-4 h-4 ${c?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:t,className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",children:e.jsx("div",{className:`transform transition-transform duration-200 ${s?"rotate-180":""}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})})]})]}),s&&e.jsxs("div",{className:"p-4 space-y-4 relative",children:[c&&e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-green-50 border border-green-200 rounded-lg p-3 mb-4 z-10",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4 text-green-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm text-green-800",children:"Agenda wordt bijgewerkt..."})]})}),e.jsx("div",{className:`${c?"mt-16":""} transition-all duration-200`,children:r?.agenda_items&&r.agenda_items.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:r.agenda_items.map((y,T)=>e.jsx("div",{className:`p-3 rounded-lg border-2 transition-all cursor-pointer ${y.completed||y.status==="completed"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"} ${p||c?"opacity-60 cursor-not-allowed":""}`,onClick:()=>{!p&&!c&&v(T,y)},children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 mt-0.5 transition-colors ${y.completed||y.status==="completed"?"border-green-500 bg-green-500":"border-gray-300 hover:border-green-400"}`,children:(y.completed||y.status==="completed")&&e.jsx(on,{className:"w-3 h-3 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-medium text-sm ${y.completed||y.status==="completed"?"text-green-800 line-through":"text-slate-900"}`,children:y.title}),y.description&&e.jsx("p",{className:`text-xs mt-1 ${y.completed||y.status==="completed"?"text-green-600":"text-slate-500"}`,children:y.description}),y.estimated_duration&&e.jsxs("p",{className:`text-xs mt-1 ${y.completed||y.status==="completed"?"text-green-600":"text-slate-400"}`,children:["â±ï¸ ",y.estimated_duration," min"]})]}),e.jsx("button",{onClick:W=>P(y,W),disabled:p||c,className:`p-1 rounded-lg transition-colors ${p||c?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:"Verwijder agenda item",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},y.id||T))}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:f?e.jsxs("form",{onSubmit:S,className:"space-y-3",children:[e.jsx("input",{type:"text",placeholder:"Agenda item titel",value:C.title,onChange:y=>A(T=>({...T,title:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,disabled:p||c,autoFocus:!0}),e.jsx("textarea",{placeholder:"Beschrijving (optioneel)",value:C.description,onChange:y=>A(T=>({...T,description:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:"2",disabled:p||c}),e.jsx("input",{type:"number",placeholder:"Geschatte tijd (minuten)",value:C.estimated_duration,onChange:y=>A(T=>({...T,estimated_duration:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",min:"1",disabled:p||c}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"submit",disabled:p||c||!C.title.trim(),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Toevoegen...":"Toevoegen"}),e.jsx("button",{type:"button",onClick:()=>{!p&&!c&&(j(!1),A({title:"",description:"",estimated_duration:""}))},disabled:p||c,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Annuleren"})]})]}):e.jsxs("button",{className:`w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm flex items-center justify-center space-x-2 ${p||c?"opacity-50 cursor-not-allowed":""}`,onClick:y=>{y.stopPropagation(),!p&&!c&&j(!0)},disabled:p||c,children:[e.jsx("span",{children:"âž•"}),e.jsx("span",{children:"Voeg agenda item toe"})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(rs,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Nog geen agenda items toegevoegd"}),f?e.jsxs("form",{onSubmit:S,className:"space-y-3 max-w-sm mx-auto",children:[e.jsx("input",{type:"text",placeholder:"Agenda item titel",value:C.title,onChange:y=>A(T=>({...T,title:y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,disabled:p||c,autoFocus:!0}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"submit",disabled:p||c||!C.title.trim(),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Toevoegen...":"Toevoegen"}),e.jsx("button",{type:"button",onClick:()=>{!p&&!c&&(j(!1),A({title:"",description:"",estimated_duration:""}))},disabled:p||c,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Annuleren"})]})]}):e.jsx("button",{className:`px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm ${p||c?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{!p&&!c&&j(!0)},disabled:p||c,children:"âž• Eerste agenda item toevoegen"})]})})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Agenda item verwijderen"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:['Weet je zeker dat je "',e.jsx("strong",{children:m?.title}),'" wilt verwijderen? Deze actie kan niet ongedaan gemaakt worden.']}),e.jsxs("div",{className:"flex space-x-3 justify-end",children:[e.jsx("button",{onClick:()=>{k(!1),g(null)},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Annuleren"}),e.jsx("button",{onClick:U,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Verwijderen"})]})]})})]})};class vn{async getReports(t){try{return console.log(`ðŸ“¡ Getting reports for meeting ${t}`),{success:!0,data:(await ne.get(`/meetings/${t}/reports`)).reports||[]}}catch(r){return console.error("Error getting reports:",r),{success:!1,error:r.message}}}async getReport(t,r){try{return console.log(`ðŸ“¡ Getting report ${r} for meeting ${t}`),{success:!0,data:(await ne.get(`/meetings/${t}/reports/${r}`)).report}}catch(a){return console.error("Error getting report:",a),{success:!1,error:a.message}}}async updateSection(t,r,a,n){try{return console.log(`ðŸ“¡ Updating section ${a} in report ${r}`),{success:!0,data:(await ne.put(`/meetings/${t}/reports/${r}/sections/${a}`,n)).section}}catch(i){return console.error("Error updating section:",i),{success:!1,error:i.message}}}async togglePrivacyFiltering(t,r){try{return console.log(`ðŸ“¡ Toggling privacy filtering for report ${r}`),{success:!0,data:(await ne.post(`/meetings/${t}/reports/${r}/privacy-toggle`)).report}}catch(a){return console.error("Error toggling privacy filtering:",a),{success:!1,error:a.message}}}async getReportStats(t){try{return console.log(`ðŸ“¡ Getting report stats for meeting ${t}`),{success:!0,data:(await ne.get(`/meetings/${t}/reports/stats`)).stats}}catch(r){return console.error("Error getting report stats:",r),{success:!1,error:r.message}}}async exportHtml(t,r){try{console.log(`ðŸ“¡ Exporting report ${r} as HTML`);const a=await ne.get(`/meetings/${t}/reports/${r}/export/html`);return{success:!0,data:a.html_content,title:a.report_title}}catch(a){return console.error("Error exporting HTML:",a),{success:!1,error:a.message}}}}const Ee=new vn,yn=({meetingId:s,meeting:t,isExpanded:r,onToggle:a,onRefresh:n,isRefreshing:i=!1})=>{const[o,h]=l.useState([]),[d,c]=l.useState(null),[p,u]=l.useState(!1),[f,j]=l.useState(null),[_,k]=l.useState(null),[m,g]=l.useState(""),[C,A]=l.useState(""),[N,b]=l.useState(!1);l.useEffect(()=>{s&&P()},[s]);const P=async()=>{u(!0),j(null);try{const w=await Ee.getReports(s);if(w.success){if(h(w.data),w.data.length>0){const D=w.data.find(O=>O.report_type==="structured"&&O.sections_count>0);if(D)await U(D.id);else{const O=w.data[0];await U(O.id)}}}else j(w.error)}catch(w){console.error("Error loading reports:",w),j("Fout bij laden verslagen")}finally{u(!1)}},U=async w=>{try{const D=await Ee.getReport(s,w);D.success?c(D.data):j(D.error)}catch(D){console.error("Error loading report:",D),j("Fout bij laden verslag")}},v=w=>{k(w.id),g(w.content),A(w.title)},S=()=>{k(null),g(""),A("")},R=async()=>{if(_){b(!0);try{const w=await Ee.updateSection(s,d.id,_,{content:m,title:C});w.success?(c(D=>({...D,sections:D.sections.map(O=>O.id===_?{...O,content:m,title:C,is_auto_generated:!1}:O)})),S()):j(w.error)}catch(w){console.error("Error saving section:",w),j("Fout bij opslaan sectie")}finally{b(!1)}}},y=async()=>{if(d)try{const w=await Ee.togglePrivacyFiltering(s,d.id);w.success?c(w.data):j(w.error)}catch(w){console.error("Error toggling privacy filtering:",w),j("Fout bij privacy filtering")}},T=async()=>{if(d)try{const w=await Ee.exportHtml(s,d.id);if(w.success){const D=new Blob([w.data],{type:"text/html"}),O=URL.createObjectURL(D),le=document.createElement("a");le.href=O,le.download=`${w.title||"verslag"}-${new Date().toISOString().split("T")[0]}.html`,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(O)}else j(w.error)}catch(w){console.error("Error downloading HTML:",w),j("Fout bij downloaden")}},W=async()=>{n?await n("report"):await P()},G=w=>{switch(w){case"summary":return"ðŸ“";case"participants":return"ðŸ‘¥";case"agenda_item":return"ðŸ“‹";case"action_items":return"âœ…";case"decisions":return"âš–ï¸";case"custom":return"ðŸ“„";default:return"ðŸ“„"}},H=w=>{switch(w){case"summary":return"bg-blue-50 border-blue-200";case"participants":return"bg-green-50 border-green-200";case"agenda_item":return"bg-purple-50 border-purple-200";case"action_items":return"bg-orange-50 border-orange-200";case"decisions":return"bg-yellow-50 border-yellow-200";case"custom":return"bg-gray-50 border-gray-200";default:return"bg-gray-50 border-gray-200"}},Z=p||i;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-blue-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 cursor-pointer hover:opacity-80 transition-opacity",onClick:a,children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("h3",{className:"font-semibold text-slate-900",children:"Gespreksverslagen"}),e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:[o.length," verslag",o.length!==1?"en":""]}),d?.sections?.length>0&&e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[d.sections.length," secties"]}),d?.privacy_filtered&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full",children:"ðŸ”’ Privacy"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[d&&r&&e.jsx("button",{onClick:w=>{w.stopPropagation(),y()},className:`p-1 rounded transition-colors ${d.privacy_filtered?"text-red-600 hover:bg-red-100":"text-green-600 hover:bg-green-100"}`,title:d.privacy_filtered?"Privacy filtering UIT":"Privacy filtering AAN",children:e.jsx(bt,{className:"w-4 h-4"})}),d&&r&&e.jsx("button",{onClick:w=>{w.stopPropagation(),T()},className:"p-1 rounded hover:bg-blue-100 text-blue-600 transition-colors",title:"Download HTML",children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsx("button",{onClick:w=>{w.stopPropagation(),W()},disabled:i||p,className:`p-2 rounded-lg border transition-colors ${i||p?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-blue-600 hover:bg-blue-50 border-blue-200 shadow-sm"}`,title:"Vernieuw verslagen",children:e.jsx("svg",{className:`w-4 h-4 ${i||p?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:a,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",children:r?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Me,{className:"w-4 h-4"})})]})]}),r&&e.jsxs("div",{className:"p-4",children:[i&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm text-blue-800",children:"Verslagen worden vernieuwd..."})]})}),p&&!i&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm text-blue-800",children:"Verslagen laden..."})]})}),f&&e.jsxs("div",{className:"flex items-center p-4 bg-red-50 rounded-lg mb-4",children:[e.jsx(ln,{className:"w-5 h-5 text-red-600 mr-3"}),e.jsx("span",{className:"text-red-700",children:f})]}),e.jsx("div",{className:`${i?"opacity-60":""}`,children:p&&!d&&!i?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(w=>e.jsxs("div",{className:"rounded-lg border p-4 bg-blue-50 border-blue-200 animate-pulse",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-200 rounded"}),e.jsx("div",{className:"h-4 bg-blue-200 rounded w-32"}),e.jsx("div",{className:"h-3 bg-blue-100 rounded w-16"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-blue-100 rounded w-full"}),e.jsx("div",{className:"h-3 bg-blue-100 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-blue-100 rounded w-1/2"})]})]},w))}):!d&&!Z?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nog geen verslag beschikbaar"}),e.jsx("p",{className:"text-gray-500 mb-4",children:'Gebruik de groene "Verslag" knop rechtsonder om een verslag te genereren'})]}):d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:d.report_title}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[e.jsxs("span",{children:["v",d.version_number]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[d.sections?.length||0," secties"]}),d.privacy_filtered&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsx("span",{className:"text-red-600",children:"ðŸ”’ Privacy gefilterd"})]})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Gegenereerd door ",d.generated_by," op "," ",d.generated_at?new Date(d.generated_at).toLocaleString("nl-NL"):"Onbekend"]}),o.length>1&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Beschikbare verslagen (",o.length,"):"]}),e.jsx("select",{value:d.id,onChange:w=>U(parseInt(w.target.value)),className:"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:o.map(w=>e.jsxs("option",{value:w.id,children:[w.report_title," (v",w.version_number,") - ",w.sections_count," secties - ",w.report_type]},w.id))})]})]}),d.sections&&d.sections.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"ðŸ“„ Verslagsecties"}),d.sections.map(w=>e.jsxs("div",{className:`rounded-lg border p-4 ${H(w.section_type)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-xl",children:G(w.section_type)}),e.jsx("h4",{className:"font-medium text-gray-900",children:w.title}),w.contains_privacy_info&&e.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded",children:"ðŸ”’ Privacy info"}),!w.is_auto_generated&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:"âœï¸ Bewerkt"})]}),w.is_editable&&_!==w.id&&e.jsx("button",{onClick:()=>v(w),className:"text-blue-600 hover:text-blue-800 p-1",title:"Sectie bewerken",children:e.jsx(cn,{className:"w-4 h-4"})})]}),_===w.id?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:C,onChange:D=>A(D.target.value),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm font-medium",placeholder:"Sectie titel..."}),e.jsx("textarea",{value:m,onChange:D=>g(D.target.value),className:"w-full p-3 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:w.section_type==="summary"?6:4,placeholder:"Sectie inhoud..."}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsxs("button",{onClick:S,className:"px-3 py-1 bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors text-sm",children:[e.jsx(un,{className:"w-3 h-3 mr-1 inline"}),"Annuleren"]}),e.jsxs("button",{onClick:R,disabled:N,className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-sm disabled:opacity-50",children:[e.jsx(dn,{className:"w-3 h-3 mr-1 inline"}),N?"Opslaan...":"Opslaan"]})]})]}):e.jsx("div",{className:"text-gray-700 whitespace-pre-wrap text-sm leading-relaxed",children:w.content||"Geen inhoud beschikbaar"}),w.last_edited_at&&!w.is_auto_generated&&e.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-200 text-xs text-gray-500",children:["Laatst bewerkt: ",new Date(w.last_edited_at).toLocaleString("nl-NL")]})]},w.id))]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ss,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Geen secties beschikbaar"}),e.jsx("p",{className:"text-gray-500",children:"Dit verslag heeft nog geen secties. Dit kan een oud verslag zijn."})]}),d.sections&&d.sections.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"ðŸ“Š Verslag Statistieken"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Totaal secties:"}),e.jsx("div",{className:"font-medium",children:d.sections.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Bewerkte secties:"}),e.jsx("div",{className:"font-medium text-blue-600",children:d.sections.filter(w=>!w.is_auto_generated).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Privacy secties:"}),e.jsx("div",{className:"font-medium text-red-600",children:d.sections.filter(w=>w.contains_privacy_info).length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("div",{className:"font-medium text-green-600",children:d.status})]})]})]})]}):null})]})]})},wn=({isExpanded:s,onToggle:t,transcriptions:r=[],onRefresh:a,isRefreshing:n=!1})=>{const i=vt.useMemo(()=>{const o=/\b\d{9}\b/g,h=/\b(?:\+31|0)[0-9]{9,10}\b/g,d=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,c=/\b\d+\s+[A-Za-z\s]+\s+\d{4}\s*[A-Za-z]{2}\b/g;let p=0,u=0,f=0,j=0;r.forEach(g=>{const C=g.text||"";p+=(C.match(o)||[]).length,u+=(C.match(h)||[]).length,f+=(C.match(d)||[]).length,j+=(C.match(c)||[]).length});const _=p+u+f+j,k=r.length>0?Math.min(100,95+(_>0?5:0)):100,m=[{type:"BSN",action:"gefilterd",status:"success",time:"2 min geleden"},{type:"Telefoon",action:"gedetecteerd",status:"info",time:"5 min geleden"},{type:"Email",action:"gefilterd",status:"success",time:"8 min geleden"}].slice(0,Math.min(3,_+1));return{totalFiltered:_,confidenceScore:k,filteredTypes:{bsn:p,phone:u,email:f,address:j},recentEvents:m}},[r]);return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-50 to-yellow-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 cursor-pointer hover:opacity-80 transition-opacity",onClick:t,children:[e.jsx(bt,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h4",{className:"font-semibold text-slate-900",children:"Privacy"}),e.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full",children:[i.totalFiltered," gefilterd"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:o=>{o.stopPropagation(),a("privacy")},disabled:n,className:`p-2 rounded-lg border transition-colors ${n?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-yellow-600 hover:bg-yellow-50 border-yellow-200 shadow-sm"}`,title:"Vernieuw privacy analyse",children:e.jsx("svg",{className:`w-4 h-4 ${n?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:t,className:"p-2 bg-yellow-100 text-yellow-600 rounded-lg hover:bg-yellow-200 transition-colors",children:s?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Me,{className:"w-4 h-4"})})]})]}),s&&e.jsxs("div",{className:"p-4",children:[n&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm text-yellow-800",children:"Privacy analyse wordt vernieuwd..."})]})}),e.jsxs("div",{className:`space-y-4 ${n?"opacity-60":""}`,children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"ðŸ”’ Privacy Status"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"AVG Compliance"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[i.confidenceScore,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:`${i.confidenceScore}%`}})})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"ðŸ” Gefilterde Data Types"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"BSN Nummers"}),e.jsxs("span",{className:"font-medium",children:[i.filteredTypes.bsn," gefilterd"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Telefoonnummers"}),e.jsxs("span",{className:"font-medium",children:[i.filteredTypes.phone," gefilterd"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email adressen"}),e.jsxs("span",{className:"font-medium",children:[i.filteredTypes.email," gefilterd"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Adressen"}),e.jsxs("span",{className:"font-medium",children:[i.filteredTypes.address," gefilterd"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"ðŸ“ Recente Privacy Events"}),e.jsx("div",{className:"space-y-2",children:i.recentEvents.length>0?i.recentEvents.map((o,h)=>e.jsx("div",{className:`text-xs border rounded p-2 ${o.status==="success"?"bg-green-50 border-green-200":o.status==="info"?"bg-blue-50 border-blue-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:o.status==="success"?"text-green-700":o.status==="info"?"text-blue-700":"text-yellow-700",children:[o.type," ",o.action]}),e.jsx("span",{className:o.status==="success"?"text-green-600":o.status==="info"?"text-blue-600":"text-yellow-600",children:o.time})]})},h)):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(bt,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"Geen privacy events gedetecteerd"})]})})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"âš™ï¸ Privacy Instellingen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:`flex items-center space-x-2 text-sm ${n?"pointer-events-none opacity-50":""}`,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded",disabled:n}),e.jsx("span",{children:"Auto-filter BSN nummers"})]}),e.jsxs("label",{className:`flex items-center space-x-2 text-sm ${n?"pointer-events-none opacity-50":""}`,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded",disabled:n}),e.jsx("span",{children:"Auto-filter telefoonnummers"})]}),e.jsxs("label",{className:`flex items-center space-x-2 text-sm ${n?"pointer-events-none opacity-50":""}`,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded",disabled:n}),e.jsx("span",{children:"Auto-filter email adressen"})]}),e.jsxs("label",{className:`flex items-center space-x-2 text-sm ${n?"pointer-events-none opacity-50":""}`,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded",disabled:n}),e.jsx("span",{children:"Auto-filter adressen"})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"ðŸ“Š Privacy Samenvatting"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Transcripties gescand:"}),e.jsx("div",{className:"font-medium",children:r.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Totaal gefilterd:"}),e.jsx("div",{className:"font-medium text-yellow-600",children:i.totalFiltered})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Compliance score:"}),e.jsxs("div",{className:`font-medium ${i.confidenceScore>95?"text-green-600":"text-yellow-600"}`,children:[i.confidenceScore,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("div",{className:`font-medium ${i.confidenceScore>95?"text-green-600":"text-yellow-600"}`,children:i.confidenceScore>95?"Veilig":"Controle nodig"})]})]})})]}),n&&e.jsxs("div",{className:"space-y-3 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-yellow-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-yellow-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-yellow-200 rounded w-2/3"})]})]})]})]})},Nn=({isExpanded:s,onToggle:t,currentSpeaker:r,setCurrentSpeaker:a,availableSpeakers:n,setAvailableSpeakers:i,speakerStats:o,getSpeakerColor:h,onRefresh:d,isRefreshing:c=!1})=>{const p=u=>{!c&&a&&a(u)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-orange-50 to-orange-100",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 cursor-pointer hover:opacity-80 transition-opacity",onClick:t,children:[e.jsx(ts,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-semibold text-slate-900",children:"Deelnemers"}),e.jsxs("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded-full",children:[n?.length||0," sprekers"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:u=>{u.stopPropagation(),d("speaker")},disabled:c,className:`p-2 rounded-lg border transition-colors ${c?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-orange-600 hover:bg-orange-50 border-orange-200 shadow-sm"}`,title:"Vernieuw spreker gegevens",children:e.jsx("svg",{className:`w-4 h-4 ${c?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx("button",{onClick:t,className:"p-2 bg-orange-100 text-orange-600 rounded-lg hover:bg-orange-200 transition-colors",children:s?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(Me,{className:"w-4 h-4"})})]})]}),s&&e.jsxs("div",{className:"p-4",children:[c&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("svg",{className:"animate-spin w-4 h-4 text-orange-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm text-orange-800",children:"Spreker gegevens worden vernieuwd..."})]})}),e.jsx("div",{className:`space-y-2 ${c?"opacity-60":""}`,children:n&&n.length>0?n.slice(0,4).map((u,f)=>e.jsxs("button",{onClick:()=>p(u),disabled:c,className:`w-full flex items-center space-x-2 p-2 rounded-lg transition-all text-sm ${r===u?"bg-blue-50 border-2 border-blue-500":"bg-gray-50 hover:bg-gray-100 border-2 border-transparent"} ${c?"cursor-not-allowed opacity-50":""}`,children:[e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:h?h(f):"#6B7280"},children:(u.displayName||u.name||u||"S").charAt(0).toUpperCase()}),e.jsx("span",{className:"flex-1 text-left font-medium",children:u.displayName||u.name||u||"Onbekende Spreker"}),u.role&&e.jsx("span",{className:"text-xs text-gray-500 px-2 py-1 bg-gray-100 rounded",children:u.role}),r===u&&e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]},u.id||f)):e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx(ts,{className:"w-8 h-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"Geen sprekers beschikbaar"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Voeg deelnemers toe aan het gesprek"})]})}),r&&e.jsxs("div",{className:`mt-4 pt-4 border-t border-gray-200 ${c?"opacity-60":""}`,children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"ðŸ“Š Spreker Info"}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:h?h(0):"#6B7280"},children:(r.displayName||r.name||r||"S").charAt(0).toUpperCase()}),e.jsx("span",{className:"font-medium text-blue-800",children:r.displayName||r.name||r})]}),e.jsxs("div",{className:"text-xs text-blue-600",children:[e.jsxs("p",{children:["Rol: ",r.role||"Deelnemer"]}),e.jsxs("p",{children:["Status: ",r.isActive?"Actief":"Inactief"]}),r.isParticipant&&e.jsx("p",{children:"Type: Meeting deelnemer"}),o&&o[r]&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Segmenten: ",o[r].segments||0]}),e.jsxs("p",{children:["Geschatte spreektijd: ",Math.round(o[r].totalTime||0),"s"]})]})]})]})]}),o&&Object.keys(o).length>0&&e.jsxs("div",{className:`mt-4 pt-4 border-t border-gray-200 ${c?"opacity-60":""}`,children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"ðŸ“ˆ Spreektijd Verdeling"}),e.jsx("div",{className:"space-y-2",children:Object.entries(o).slice(0,3).map(([u,f],j)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:h?h(j):"#6B7280"}}),e.jsx("span",{className:"text-gray-700",children:u})]}),e.jsxs("div",{className:"text-gray-500",children:[f.segments||0," seg. Â· ",Math.round(f.totalTime||0),"s"]})]},u))})]}),n&&n.length>4&&e.jsx("div",{className:`mt-3 pt-3 border-t border-gray-200 ${c?"opacity-60":""}`,children:e.jsxs("button",{className:`w-full text-xs text-blue-600 hover:text-blue-800 transition-colors ${c?"cursor-not-allowed opacity-50":""}`,onClick:()=>{c||console.log("Show all speakers")},disabled:c,children:["Toon alle ",n.length," sprekers â†’"]})}),e.jsxs("div",{className:`mt-4 pt-4 border-t border-gray-200 ${c?"opacity-60":""}`,children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"âš¡ Snel Wisselen"}),e.jsx("div",{className:"flex space-x-2",children:n&&n.slice(0,3).map((u,f)=>e.jsx("button",{onClick:()=>p(u),disabled:c,className:`flex-1 p-2 rounded-lg text-xs transition-colors ${r===u?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"} ${c?"cursor-not-allowed opacity-50":""}`,children:(u.displayName||u.name||u||"S").charAt(0).toUpperCase()},u.id||f))})]}),c&&e.jsxs("div",{className:"space-y-3 animate-pulse mt-4",children:[e.jsx("div",{className:"h-4 bg-orange-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-orange-200 rounded w-1/2"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-8 bg-orange-200 rounded flex-1"}),e.jsx("div",{className:"h-8 bg-orange-200 rounded flex-1"}),e.jsx("div",{className:"h-8 bg-orange-200 rounded flex-1"})]})]})]})]})},kn=({isOpen:s,onClose:t,onConfirm:r,title:a,message:n})=>s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-sm w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a}),e.jsx("p",{className:"text-gray-600 mb-6",children:n}),e.jsxs("div",{className:"flex space-x-3 justify-end",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Annuleren"}),e.jsx("button",{onClick:()=>{r(),t()},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Verwijderen"})]})]})}):null,Sn=({meetingId:s,meeting:t,isLoading:r=!1,onDownloadRawData:a,onN8NTrigger:n,n8nButtonState:i="idle"})=>{const o=()=>{const c="text-white px-4 py-3 rounded-full shadow-lg transition-all transform hover:scale-105 flex items-center space-x-2";switch(i){case"loading":return`${c} bg-yellow-600 cursor-wait`;case"success":return`${c} bg-green-600 hover:bg-green-700`;case"error":return`${c} bg-red-600 hover:bg-red-700`;default:return`${c} bg-green-600 hover:bg-green-700`}},h=()=>{switch(i){case"loading":return"Versturen...";case"success":return"Verstuurd!";case"error":return"Probeer opnieuw";default:return"Verslag"}},d=()=>{switch(i){case"loading":return e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"});case"success":return e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});default:return e.jsx(rn,{className:"w-5 h-5"})}};return e.jsxs("div",{className:"fixed bottom-6 right-6 flex flex-col space-y-3 z-50",children:[e.jsxs("button",{onClick:a,disabled:r,className:`bg-blue-600 text-white px-4 py-3 rounded-full shadow-lg hover:bg-blue-700 transition-all transform hover:scale-105 flex items-center space-x-2 ${r?"opacity-50 cursor-not-allowed":""}`,title:"Download ruwe data",children:[e.jsx(_s,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Ruwe Data"})]}),e.jsxs("button",{type:"button",onClick:n,disabled:r||i==="loading",className:o(),title:i==="loading"?"Wordt verstuurd naar N8N...":"Genereer verslag via N8N",children:[d(),e.jsx("span",{className:"text-sm font-medium",children:h()})]})]})},Cn=()=>{const{id:s}=Mr(),t=Se();console.log("ðŸ”„ MeetingRoom component rendering, ID:",s,"Time:",new Date().toLocaleTimeString());const r=l.useRef(!1),a=l.useRef(null),n=!1,[i,o]=l.useState(!0),[h,d]=l.useState(""),[c,p]=l.useState(null),[u,f]=l.useState([]),[j,_]=l.useState([]),[k,m]=l.useState([]),[g,C]=l.useState("idle"),[A,N]=l.useState({recording:!0,liveTranscription:!1,whisperTranscription:!1,agenda:!1,report:!1,privacy:!1,speaker:!1}),[b,P]=l.useState({recording:!1,liveTranscription:!1,whisperTranscription:!1,agenda:!1,report:!1,privacy:!1,speaker:!1}),[U,v]=l.useState("automatic"),[S,R]=l.useState(!1),[y,T]=l.useState(0),[W,G]=l.useState(null),[H,Z]=l.useState(!1),[w,D]=l.useState(!1),[O,le]=l.useState(""),[We,_e]=l.useState(!1),[ie,se]=l.useState(""),[Be,Te]=l.useState([]),[Oe,Ye]=l.useState({}),[ze,et]=l.useState(0),[Fe,Ue]=l.useState({}),[$t,Pt]=l.useState({hasReport:!1,summary:"",keyPoints:[],actionItems:[],nextSteps:[]});Ya({id:s,transcriptions:u,setTranscriptions:f,currentSpeaker:ie,setCurrentSpeaker:se,availableSpeakers:Be,setAvailableSpeakers:Te,speakerStats:Oe,setSpeakerStats:Ye,currentAgendaIndex:ze,setCurrentAgendaIndex:et,agendaStartTimes:Fe,setAgendaStartTimes:Ue,meeting:c}),l.useEffect(()=>{console.log("ðŸŽ¯ useEffect triggered for ID:",s,"Already loading:",r.current),s&&!r.current&&a.current!==s&&(r.current=!0,a.current=s,V())},[s]),l.useEffect(()=>{c&&c.participants&&B()},[c]),l.useEffect(()=>{let x=null;return S&&W?x=setInterval(()=>{const E=Math.floor((new Date-W)/1e3);T(E)},1e3):S||clearInterval(x),()=>clearInterval(x)},[S,W]);const tt=async()=>{try{const x=await Ke.getMeeting(s);x.success&&p(x.data)}catch(x){console.error("Error fetching meeting data:",x)}},Ve=l.useCallback(async()=>{if(c?.id){P(x=>({...x,agenda:!0}));try{console.log("ðŸ”„ Refreshing agenda data only...");const x=await Xe.getAgendaItems(c.id);x&&x.success?(p(E=>({...E,agenda_items:x.data})),console.log("âœ… Agenda data refreshed successfully")):(console.error("âŒ Failed to refresh agenda data:",x?.message||"Unknown error"),d(`Fout bij verversen agenda: ${x?.message||"Onbekende fout"}`))}catch(x){console.error("âŒ Error refreshing agenda data:",x),d(`Fout bij verversen agenda: ${x.message}`)}finally{P(x=>({...x,agenda:!1}))}}},[c?.id,p,P]),st=x=>{console.log("ðŸ¤– Meeting room received Whisper update:",x),x.type==="transcription_completed"&&x.transcription&&m(E=>E.some(re=>re.id===x.transcription.id)?E:[x.transcription,...E].slice(0,50))},xe=async(x,E=null)=>{console.log(`ðŸ”„ Refreshing ${x} panel...`),P(z=>({...z,[x]:!0}));try{switch(x){case"recording":await tt();break;case"liveTranscription":await He();break;case"whisperTranscription":E?(m(E),f(z=>[...z.filter(re=>!["whisper","whisper_verified","background_whisper"].includes(re.source)),...E])):await $();break;case"agenda":await Ve();break;case"report":await M();break;case"privacy":await M();break;case"speaker":await M();break;default:console.warn(`Unknown panel type: ${x}`)}console.log(`âœ… ${x} panel refreshed successfully`)}catch(z){console.error(`âŒ Error refreshing ${x} panel:`,z),d(`Fout bij verversen ${x} panel: ${z.message}`)}finally{P(z=>({...z,[x]:!1}))}},He=async()=>{try{const x=await fe.getTranscriptions(s,"live");x.success&&(_(x.data||[]),f(E=>[...E.filter(z=>z.source!=="live"),...x.data||[]]))}catch(x){throw console.error("Error refreshing live transcriptions:",x),x}},$=async()=>{try{console.log("ðŸ”„ Refreshing Whisper transcriptions...");const x=await Q.getWhisperTranscriptions(s);x.success?(m(x.transcriptions),f(E=>[...E.filter(z=>!["whisper","whisper_verified","background_whisper"].includes(z.source)),...x.transcriptions]),console.log("âœ… Whisper transcriptions refreshed:",x.transcriptions.length)):console.error("âŒ Failed to refresh Whisper transcriptions:",x.error)}catch(x){throw console.error("âŒ Whisper refresh error:",x),x}},M=async()=>{try{const[x,E]=await Promise.all([fe.getTranscriptions(s,"live"),Q.getWhisperTranscriptions(s)]);x.success&&_(x.data||[]),E.success&&m(E.transcriptions||[]);const z=[...x.data||[],...E.transcriptions||[]];f(z)}catch(x){throw console.error("Error refreshing all transcriptions:",x),x}},V=async()=>{console.log("ðŸš€ loadMeetingData CALLED at:",new Date().toLocaleTimeString());try{o(!0),d(""),console.log("ðŸ“¥ Loading meeting data for ID:",s);const x=await Ke.getMeeting(s);if(!x.success)throw new Error(x.message||"Fout bij ophalen meeting");p(x.data),console.log("âœ… Meeting loaded:",x.data),console.log("ðŸ“¥ Loading transcriptions...");const E=await fe.getTranscriptions(s);if(E.success){const z=E.data||[],re=z.filter(rt=>rt.source==="live"),pe=z.filter(rt=>["whisper","whisper_verified","background_whisper"].includes(rt.source));f(z),_(re),m(pe),console.log("âœ… Transcriptions loaded:",{total:z.length,live:re.length,whisper:pe.length})}else console.warn("âš ï¸ Transcriptions not loaded:",E.message);console.log("âœ… Initial data loading complete")}catch(x){console.error("âŒ Error loading meeting data:",x),d(x.message||"Er ging iets mis bij het laden van de meeting")}finally{o(!1),r.current=!1}},B=()=>{if(c?.participants){const x=c.participants.map(E=>E.name||E.role||"Onbekend");Te(["Onbekend",...x]),se(x[0]||"Onbekend")}},ee=x=>{const E=Math.floor(x/3600),z=Math.floor(x%3600/60),re=x%60;return E>0?`${E}:${z.toString().padStart(2,"0")}:${re.toString().padStart(2,"0")}`:`${z.toString().padStart(2,"0")}:${re.toString().padStart(2,"0")}`},te=x=>{N(E=>({...E,[x]:!E[x]}))},$s=x=>{v(x),console.log("Recording mode selected:",x)},Ps=()=>{R(!0),G(new Date),N(x=>({...x,liveTranscription:!0})),console.log("Manual recording started")},Es=()=>{Z(!0),N(x=>({...x,liveTranscription:!0})),console.log("Auto transcription started")},As=()=>{R(!1),console.log("Recording paused")},Rs=()=>{R(!1),Z(!1),T(0),G(null),console.log("Recording stopped")},Is=x=>{console.log("Live transcription received:",x),_(E=>[...E,x]),f(E=>[...E,x])},Ds=x=>{console.log(`ðŸ—‘ï¸ Delete requested for type: ${x}`),le(x),D(!0)},Ms=async()=>{try{_e(!0),console.log(`ðŸ—‘ï¸ Starting delete process for ${O} transcriptions (meeting ${s})...`);const x=await fe.deleteTranscriptionsByType(s,O);if(!x.success)throw new Error(x.message||"Failed to delete transcriptions from database");console.log(`âœ… Successfully deleted ${x.data?.deleted_count||0} ${O} transcriptions from database`),O==="live"?(_([]),f(E=>E.filter(z=>!["live","live_fallback","background_live"].includes(z.source))),console.log("ðŸ”„ UI updated: Live transcriptions cleared")):O==="whisper"&&(m([]),f(E=>E.filter(z=>!["whisper","whisper_verified","background_whisper"].includes(z.source))),console.log("ðŸ”„ UI updated: Whisper transcriptions cleared")),d(""),D(!1),le(""),console.log(`âœ… Delete process completed successfully for ${O} type`)}catch(x){console.error(`âŒ Error deleting ${O} transcriptions:`,x),d(`Fout bij verwijderen ${O} transcripties: ${x.message}`)}finally{_e(!1)}},Ls=x=>{console.log("Toggle agenda item:",x)},Ws=()=>{if(!c?.agenda_items)return 0;const x=c.agenda_items.filter(E=>E.completed||E.status==="completed").length;return Math.round(x/c.agenda_items.length*100)};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("svg",{className:"animate-spin w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-lg text-gray-700",children:"Meeting wordt geladen..."})]})})}):h?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-sm border border-red-200 max-w-md",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Fout bij laden meeting"}),e.jsx("p",{className:"text-red-600 mb-4",children:h}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{onClick:()=>V(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Opnieuw proberen"}),e.jsx("button",{onClick:()=>t("/meetings"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Terug naar overzicht"})]})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(hn,{meeting:c,onNavigateBack:()=>t("/meetings")}),e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-8 space-y-6",children:[e.jsx(fn,{isExpanded:A.recording,onToggle:()=>te("recording"),recordingMode:U,onSelectRecordingMode:$s,isRecording:S,recordingTime:y,recordingStartTime:W,onStartManualRecording:Ps,onStartAutoTranscription:Es,onPauseRecording:As,onStopRecording:Rs,onLiveTranscriptionReceived:Is,onWhisperTranscriptionReceived:st,meetingId:s,meeting:c,formatTime:ee,onRefresh:xe,isRefreshing:b.recording}),e.jsx(yn,{meetingId:s,meeting:c,isExpanded:A.report,onToggle:()=>te("report"),onRefresh:xe,isRefreshing:b.report}),n,e.jsx(bn,{isExpanded:A.whisperTranscription,onToggle:()=>te("whisperTranscription"),whisperTranscriptions:k,onDeleteTranscriptions:Ds,isDeleting:We&&O==="whisper",meetingId:s,onRefresh:xe,isRefreshing:b.whisperTranscription})]}),e.jsxs("div",{className:"col-span-4 space-y-6",children:[e.jsx(jn,{isExpanded:A.agenda,onToggle:()=>te("agenda"),meeting:c,setMeeting:p,currentAgendaIndex:ze,onToggleAgendaItem:Ls,calculateAgendaProgress:Ws,onAgendaRefresh:Ve,isRefreshing:b.agenda},c?.agendaItems?.length||c?.agenda_items?.length||0),e.jsx(wn,{isExpanded:A.privacy,onToggle:()=>te("privacy"),transcriptions:u,onRefresh:xe,isRefreshing:b.privacy}),e.jsx(Nn,{isExpanded:A.speaker,onToggle:()=>te("speaker"),currentSpeaker:ie,setCurrentSpeaker:se,availableSpeakers:Be,setAvailableSpeakers:Te,speakerStats:Oe,getSpeakerColor:Xa,onRefresh:xe,isRefreshing:b.speaker})]})]})}),w&&e.jsx(kn,{isOpen:w,onClose:()=>D(!1),onConfirm:Ms,title:"Transcripties verwijderen",message:`Weet je zeker dat je alle ${O==="live"?"live":"Whisper"} transcripties wilt verwijderen? Deze actie kan niet ongedaan gemaakt worden.`,confirmText:"Verwijderen",cancelText:"Annuleren",type:"danger",isLoading:We}),e.jsx(Sn,{meetingId:s,meeting:c,isLoading:b.report||i,n8nButtonState:g,onDownloadRawData:()=>{if(!s){alert("Meeting ID niet beschikbaar");return}const x={meeting:{id:s,title:c?.title||"Onbekend",status:c?.status||"onbekend",participants:c?.participants||[],liveTranscriptions:j,whisperTranscriptions:k,recordingTime:y},exported_at:new Date().toISOString()},E=JSON.stringify(x,null,2),z=new Blob([E],{type:"application/json"}),re=URL.createObjectURL(z),pe=document.createElement("a");pe.href=re,pe.download=`meeting-${s}-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),URL.revokeObjectURL(re)},onN8NTrigger:x=>{x?.preventDefault(),!(!s||g==="loading")&&(C("loading"),fetch(`http://localhost:8000/api/n8n/trigger-meeting-completed/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(E=>E.json()).then(E=>{console.log("N8N triggered:",E.success?"âœ…":"âŒ",E),E.success?(C("success"),setTimeout(()=>C("idle"),2e3)):(C("error"),setTimeout(()=>C("idle"),3e3))}).catch(E=>{console.error("N8N error:",E),C("error"),setTimeout(()=>C("idle"),3e3)}))}})]})},_n=()=>{const[s,t]=l.useState(!0),[r,a]=l.useState([]),[n,i]=l.useState(!1),[o,h]=l.useState(null),[d,c]=l.useState(""),[p,u]=l.useState({name:"",description:"",category:"general",privacy_level:"standard",auto_transcription:!0,privacy_filters:[]}),f=[{id:"personal_info",label:"Persoonlijke informatie",type:"regex"},{id:"financial_info",label:"FinanciÃ«le gegevens",type:"keyword"},{id:"medical_info",label:"Medische informatie",type:"ml"},{id:"contact_details",label:"Contactgegevens",type:"regex"}];l.useEffect(()=>{j()},[]);const j=async()=>{try{t(!0);const b=[{id:1,name:"Algemeen Gesprek",description:"Standaard gesprek voor algemene onderwerpen",category:"general",privacy_level:"standard",auto_transcription:!0,privacy_filters:["personal_info"],created_at:"2024-01-15"},{id:2,name:"Participatie Sessie",description:"Gesprek met burgers voor participatie processen",category:"participation",privacy_level:"high",auto_transcription:!0,privacy_filters:["personal_info","contact_details"],created_at:"2024-01-10"}];setTimeout(()=>{a(b),t(!1)},1e3)}catch{c("Er ging iets mis bij het laden van de meeting types"),t(!1)}},_=()=>{h(null),u({name:"",description:"",category:"general",privacy_level:"standard",auto_transcription:!0,privacy_filters:[]}),i(!0)},k=b=>{h(b),u({name:b.name,description:b.description,category:b.category,privacy_level:b.privacy_level,auto_transcription:b.auto_transcription,privacy_filters:b.privacy_filters}),i(!0)},m=()=>{i(!1),h(null),c("")},g=async()=>{try{if(!p.name.trim()){c("Naam is verplicht");return}console.log("Saving meeting type:",p),m(),j()}catch{c("Er ging iets mis bij het opslaan")}},C=async b=>{if(window.confirm("Weet je zeker dat je dit meeting type wilt verwijderen?"))try{console.log("Deleting meeting type:",b),j()}catch{c("Er ging iets mis bij het verwijderen")}},A=b=>({general:"Algemeen",participation:"Participatie",care:"Zorg",education:"Onderwijs"})[b]||b,N=b=>({low:"success",standard:"info",high:"warning",strict:"error"})[b]||"default";return e.jsxs(I,{children:[e.jsxs(I,{sx:{mb:4},children:[e.jsx(L,{variant:"h4",component:"h1",gutterBottom:!0,children:"Meeting Types Configuratie"}),e.jsx(L,{variant:"body1",color:"text.secondary",children:"Beheer verschillende types gesprekken met specifieke privacy-instellingen"})]}),e.jsx(I,{sx:{mb:3},children:e.jsx(de,{variant:"contained",startIcon:e.jsx(ft,{}),onClick:_,sx:{mr:2},children:"Nieuw Meeting Type"})}),d&&e.jsx(Wt,{severity:"error",sx:{mb:3},onClose:()=>c(""),children:d}),e.jsx(ve,{children:e.jsx(ye,{children:e.jsx(Js,{component:Xs,variant:"outlined",children:e.jsxs(Ks,{children:[e.jsx(Zs,{children:e.jsxs(Ge,{children:[e.jsx(X,{children:"Naam"}),e.jsx(X,{children:"Categorie"}),e.jsx(X,{children:"Privacy Level"}),e.jsx(X,{children:"Auto Transcriptie"}),e.jsx(X,{children:"Privacy Filters"}),e.jsx(X,{align:"right",children:"Acties"})]})}),e.jsx(Qs,{children:s?[...Array(3)].map((b,P)=>e.jsxs(Ge,{children:[e.jsx(X,{children:e.jsx(je,{variant:"text"})}),e.jsx(X,{children:e.jsx(je,{variant:"text"})}),e.jsx(X,{children:e.jsx(je,{variant:"text"})}),e.jsx(X,{children:e.jsx(je,{variant:"text"})}),e.jsx(X,{children:e.jsx(je,{variant:"text"})}),e.jsx(X,{children:e.jsx(je,{variant:"text"})})]},P)):r.length===0?e.jsx(Ge,{children:e.jsx(X,{colSpan:6,align:"center",children:e.jsx(L,{variant:"body2",color:"text.secondary",children:"Nog geen meeting types geconfigureerd"})})}):r.map(b=>e.jsxs(Ge,{children:[e.jsx(X,{children:e.jsxs(I,{children:[e.jsx(L,{variant:"subtitle2",children:b.name}),e.jsx(L,{variant:"body2",color:"text.secondary",children:b.description})]})}),e.jsx(X,{children:e.jsx(ce,{label:A(b.category),size:"small",variant:"outlined"})}),e.jsx(X,{children:e.jsx(ce,{label:b.privacy_level,size:"small",color:N(b.privacy_level)})}),e.jsx(X,{children:e.jsx(ce,{label:b.auto_transcription?"Aan":"Uit",size:"small",color:b.auto_transcription?"success":"default"})}),e.jsx(X,{children:e.jsx(I,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:b.privacy_filters.map(P=>e.jsx(ce,{label:f.find(U=>U.id===P)?.label||P,size:"small",variant:"outlined"},P))})}),e.jsxs(X,{align:"right",children:[e.jsx(we,{size:"small",onClick:()=>k(b),title:"Bewerken",children:e.jsx(Da,{})}),e.jsx(we,{size:"small",onClick:()=>C(b.id),title:"Verwijderen",color:"error",children:e.jsx(Ia,{})})]})]},b.id))})]})})})}),e.jsxs(Ys,{open:n,onClose:m,maxWidth:"md",fullWidth:!0,children:[e.jsx(er,{children:o?"Meeting Type Bewerken":"Nieuw Meeting Type"}),e.jsx(tr,{children:e.jsxs(I,{sx:{pt:2},children:[e.jsxs(ae,{container:!0,spacing:3,children:[e.jsx(ae,{item:!0,xs:12,children:e.jsx(Bt,{fullWidth:!0,label:"Naam",value:p.name,onChange:b=>u({...p,name:b.target.value}),required:!0})}),e.jsx(ae,{item:!0,xs:12,children:e.jsx(Bt,{fullWidth:!0,label:"Beschrijving",multiline:!0,rows:3,value:p.description,onChange:b=>u({...p,description:b.target.value})})}),e.jsx(ae,{item:!0,xs:12,md:6,children:e.jsxs(at,{fullWidth:!0,children:[e.jsx(nt,{children:"Categorie"}),e.jsxs(it,{value:p.category,label:"Categorie",onChange:b=>u({...p,category:b.target.value}),children:[e.jsx(Y,{value:"general",children:"Algemeen"}),e.jsx(Y,{value:"participation",children:"Participatie"}),e.jsx(Y,{value:"care",children:"Zorg"}),e.jsx(Y,{value:"education",children:"Onderwijs"})]})]})}),e.jsx(ae,{item:!0,xs:12,md:6,children:e.jsxs(at,{fullWidth:!0,children:[e.jsx(nt,{children:"Privacy Level"}),e.jsxs(it,{value:p.privacy_level,label:"Privacy Level",onChange:b=>u({...p,privacy_level:b.target.value}),children:[e.jsx(Y,{value:"low",children:"Laag"}),e.jsx(Y,{value:"standard",children:"Standaard"}),e.jsx(Y,{value:"high",children:"Hoog"}),e.jsx(Y,{value:"strict",children:"Strikt"})]})]})}),e.jsx(ae,{item:!0,xs:12,children:e.jsxs(at,{fullWidth:!0,children:[e.jsx(nt,{children:"Privacy Filters"}),e.jsx(it,{multiple:!0,value:p.privacy_filters,label:"Privacy Filters",onChange:b=>u({...p,privacy_filters:b.target.value}),renderValue:b=>e.jsx(I,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:b.map(P=>e.jsx(ce,{label:f.find(U=>U.id===P)?.label||P,size:"small"},P))}),children:f.map(b=>e.jsx(Y,{value:b.id,children:b.label},b.id))})]})})]}),d&&e.jsx(Wt,{severity:"error",sx:{mt:2},children:d})]})}),e.jsxs(sr,{children:[e.jsx(de,{onClick:m,children:"Annuleren"}),e.jsx(de,{onClick:g,variant:"contained",children:o?"Bijwerken":"Aanmaken"})]})]})]})},qe=()=>e.jsxs("div",{className:"modern-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-4",children:"Gesprekken"}),e.jsx("p",{className:"text-slate-600",children:"Hier komen je gesprekken te staan"})]}),Tn=()=>e.jsxs("div",{className:"modern-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-4",children:"Deelnemers"}),e.jsx("p",{className:"text-slate-600",children:"Hier komen de deelnemers te staan"})]}),Je=()=>e.jsxs("div",{className:"modern-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-4",children:"Sjablonen"}),e.jsx("p",{className:"text-slate-600",children:"Hier komen de gesprekssjablonen te staan"})]}),$n=()=>e.jsxs("div",{className:"modern-card p-8",children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-4",children:"Instellingen"}),e.jsx("p",{className:"text-slate-600",children:"Hier komen de instellingen te staan"})]}),Pn=({children:s})=>{const{isAuthenticated:t,loading:r}=Ns();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600",children:"Laden..."})]})}):t?s:e.jsx(ys,{to:"/login"})};function En(){return e.jsx(na,{children:e.jsx(sa,{children:e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs(Yr,{children:[e.jsx(K,{path:"/login",element:e.jsx(za,{})}),e.jsxs(K,{path:"/",element:e.jsx(Pn,{children:e.jsx(Ra,{})}),children:[e.jsx(K,{index:!0,element:e.jsx(ys,{to:"/dashboard"})}),e.jsx(K,{path:"dashboard",element:e.jsx(Oa,{})}),e.jsx(K,{path:"meetings/create",element:e.jsx(Fa,{})}),e.jsx(K,{path:"meetings/:id/room",element:e.jsx(Cn,{})}),e.jsx(K,{path:"meeting-types",element:e.jsx(_n,{})}),e.jsx(K,{path:"meetings",element:e.jsx(qe,{})}),e.jsx(K,{path:"meetings/active",element:e.jsx(qe,{})}),e.jsx(K,{path:"meetings/scheduled",element:e.jsx(qe,{})}),e.jsx(K,{path:"meetings/history",element:e.jsx(qe,{})}),e.jsx(K,{path:"participants",element:e.jsx(Tn,{})}),e.jsx(K,{path:"templates",element:e.jsx(Je,{})}),e.jsx(K,{path:"templates/intake",element:e.jsx(Je,{})}),e.jsx(K,{path:"templates/progress",element:e.jsx(Je,{})}),e.jsx(K,{path:"templates/custom",element:e.jsx(Je,{})}),e.jsx(K,{path:"settings",element:e.jsx($n,{})}),e.jsx(K,{path:"/test-tailwind",element:e.jsx(ra,{})})]})]})})})})}ht.createRoot(document.getElementById("root")).render(e.jsx(vt.StrictMode,{children:e.jsx(En,{})}));
//# sourceMappingURL=index-BmrCk9EF.js.map
